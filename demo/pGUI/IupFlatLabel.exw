--
-- IupFlatLabel.exw
--
--without js -- (quite an ugly little thing this, anyway)
with javascript_semantics -- needs work, IupImage[RGB] kludged to IupImageRGBA, plus:
--/* (see DEV/temp:'s below)
IupLabel(TIP,Text Label)
FONT=Helvetica, 12??
IupH/Vbox(BGCOLOR,75 150 170)
IupLabel(TIP,Image Label)
IupLabel(TEXTWRAP,Yes)
IupH/Vbox(BGCOLOR,75 150 170)
--*/
include pGUI.e

constant TEST_IMAGE_SIZE = 20

constant image_data_8 = 
{
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5, 
  5,0,0,0,3,3,3,3,3,3,4,4,4,4,4,4,0,0,0,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
}

constant image_data_24 = 
{
  000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000, 
  000,000,000,255,255,255,255,255,255,255,255,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,000,000,000,
  000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,
}

constant image_data_32 = 
{
  000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255, 
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,000,000,255,255,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,255,255,255,192,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,255,
  000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,000,000,000,255,
}

function button_cb(Ihandle ih, integer but, pressed, x, y, atom pStatus)
  printf(1,"BUTTON_CB(but=%c (%d), x=%d, y=%d [%s])\n", {but, pressed, x, y, peek_string(pStatus)})
  return IUP_DEFAULT
end function

--/*
function enter_cb(Ihandle ih)
  Ihandle box = IupGetChild(ih, 0)
  if IupGetInt(box, "ACTIVE") then
    IupSetAttribute(box, "ACTIVE", "NO")
  else
    IupSetAttribute(box, "ACTIVE", "YES")
  end if
  return IUP_DEFAULT
end function

function leavewindow_cb(Ihandle ih)
  printf(1,"LEAVEWINDOW_CB(%s)\n", IupGetAttribute(ih, "TITLE"))
  return IUP_DEFAULT
end function

function enterwindow_cb(Ihandle ih)
  printf(1,"ENTERWINDOW_CB(%s)\n", IupGetAttribute(ih, "TITLE"))
  return IUP_DEFAULT
end function
--*/

procedure FlatLabelTest()
  Ihandle dlg, image1, image2, image3, 
          label1, label2, label3, label4, label5, box1, 
          label6, label7, fill, label8, label9, label10, label11, box2, 
          label12

  label1 = IupFlatLabel(NULL)
  if IupGetInt(NULL, "UTF8MODE") then
    IupSetAttribute(label1, "TITLE", "Text Labels (çãõáóé §£µ¡³©)")
  else
    IupSetAttribute(label1, "TITLE", "Text Labels (no utf8)")
  end if
  //IupSetAttribute(label1, "BGCOLOR", IupGetGlobal("DLGBGCOLOR"))
  IupSetAttribute(label1, "PADDING", "0x0")
  IupSetAttribute(label1, "TIP", "Text Label")
--  IupAppend(box1, label1)
//  IupSetCallback(label1, "ENTERWINDOW_CB", (Icallback)enterwindow_cb)
//  IupSetCallback(label1, "LEAVEWINDOW_CB", (Icallback)leavewindow_cb)
//  IupSetAttribute(label1, "PADDING", "20x20")

  label2 = IupLabel(NULL)
  IupSetAttribute(label2, "SEPARATOR", "HORIZONTAL")
--  IupAppend(box1, label2)
//  IupSetCallback(label2, "ENTERWINDOW_CB", (Icallback)enterwindow_cb)
//  IupSetCallback(label2, "LEAVEWINDOW_CB", (Icallback)leavewindow_cb)

  label3 = IupFlatLabel(NULL)
  IupSetAttribute(label3, "TITLE", "Text &Label\nSecond Line")
  IupSetAttribute(label3, "FGCOLOR", "0 0 255")
  IupSetAttribute(label3, "RASTERSIZE", "250x100")
//  IupSetAttribute(label3, "RASTERSIZE", "150x70")
//  IupSetAttribute(label3, "RASTERSIZE", "30x70")
//  IupSetAttribute(label3, "WORDWRAP", "YES")
//  IupSetAttribute(label3, "ELLIPSIS", "YES")
  IupSetAttribute(label3, "ALIGNMENT", "ALEFT:ATOP")
--  IupAppend(box1, label3)
//  IupSetCallback(label3, "ENTERWINDOW_CB", (Icallback)enterwindow_cb)
//  IupSetCallback(label3, "LEAVEWINDOW_CB", (Icallback)leavewindow_cb)

  label4 = IupFlatLabel(NULL)
  IupSetAttribute(label4, "TITLE", "Text\nSecond Line")
//  IupSetAttribute(label4, "RASTERSIZE", "150x70")
  IupSetAttribute(label4, "RASTERSIZE", "250x100")
  IupSetAttribute(label4, "ALIGNMENT", "ACENTER:ACENTER")
  IupSetAttribute(label4, "FONT", "Helvetica, 12")
//  IupSetAttribute(label4, "FONT", "Helvetica, Underline 14")
//  IupSetAttribute(label4, "FONTSIZE", "14")
//  IupSetAttribute(label4, "FONTSTYLE", "Italic")
//  IupSetAttribute(label4, "FONTSTYLE", "Bold")
--  IupAppend(box1, label4)
//  IupSetCallback(label4, "ENTERWINDOW_CB", (Icallback)enterwindow_cb)
//  IupSetCallback(label4, "LEAVEWINDOW_CB", (Icallback)leavewindow_cb)

  label5 = IupFlatLabel(NULL)
  IupSetAttribute(label5, "TITLE", "Text\nSecond Line")
//  IupSetAttribute(label5, "RASTERSIZE", "150x70")
  IupSetAttribute(label5, "RASTERSIZE", "250x100")
  IupSetAttribute(label5, "ALIGNMENT", "ARIGHT:ABOTTOM")
//  IupSetCallback(label5, "ENTERWINDOW_CB", enter1_cb)
--  IupAppend(box1, label5)
//  IupSetCallback(label5, "ENTERWINDOW_CB", (Icallback)enterwindow_cb)
//  IupSetCallback(label5, "LEAVEWINDOW_CB", (Icallback)leavewindow_cb)

  box1 = IupVbox({label1,label2,label3,label4,label5})
  IupSetAttribute(box1, "MARGIN", "5x5")
  IupSetAttribute(box1, "GAP", "5")
  IupSetAttribute(box1, "BGCOLOR", "75 150 170")  /* label must be transparent for BGCOLOR */
  IupSetAttribute(box1, "PADDING", "5x5")

--DEV/temp:
--/*
  image1 = IupImage(TEST_IMAGE_SIZE, TEST_IMAGE_SIZE, image_data_8)
  IupSetAttribute(image1, "0", "BGCOLOR")
  IupSetAttribute(image1, "1", "255 0 0") 
  IupSetAttribute(image1, "2", "0 255 0")
  IupSetAttribute(image1, "3", "0 0 255") 
  IupSetAttribute(image1, "4", "255 255 255") 
  IupSetAttribute(image1, "5", "0 0 0") 
--*/
  image1 = IupImageRGBA(TEST_IMAGE_SIZE, TEST_IMAGE_SIZE, image_data_32)

  label6 = IupFlatLabel(NULL)
  IupSetAttributeHandle(label6, "IMAGE", image1)
  //IupSetAttribute(label6, "IMAGE", "TECGRAF_BITMAP")
  //IupSetAttribute(label6, "IMAGE", "../test/tecgraf.bmp")
  //IupSetAttribute(label6, "IMAGE", "../test/file_large.xbm")
  //IupSetAttribute(label6, "IMAGE", "gtk-open")
  //IupSetAttribute(label6, "BGCOLOR", IupGetGlobal("DLGBGCOLOR"))
  IupSetAttribute(label6, "PADDING", "0x0")
  IupSetAttribute(label6, "TIP", "Image Label")
--  IupAppend(box2, label6)

  label7 = IupLabel(NULL)
  IupSetAttribute(label7, "SEPARATOR", "HORIZONTAL")
--  IupAppend(box2, label7)

  fill = IupFill()
--  IupSetAttribute(fill, "SIZE", "20")
  //IupAppend(box2, fill)

  label8 = IupFlatLabel(NULL)
  IupSetAttributeHandle(label8, "IMAGE", image1)
//  IupSetAttribute(label8, "RASTERSIZE", "150x50")
  IupSetAttribute(label8, "RASTERSIZE", "250x100")
//  IupSetAttribute(label8, "ALIGNMENT", "ALEFT")
--  IupAppend(box2, label8)

--DEV/temp:
--  image2 = IupImageRGB(TEST_IMAGE_SIZE, TEST_IMAGE_SIZE, image_data_24)
  image2 = IupImageRGBA(TEST_IMAGE_SIZE, TEST_IMAGE_SIZE, image_data_32)

  label9 = IupFlatLabel(NULL)
  IupSetAttributeHandle(label9, "IMAGE", image2)
//  IupSetAttribute(label9, "RASTERSIZE", "150x50")
  IupSetAttribute(label9, "RASTERSIZE", "250x100")
  IupSetAttribute(label9, "ALIGNMENT", "ACENTER")
--  IupAppend(box2, label9)

  image3 = IupImageRGBA(TEST_IMAGE_SIZE, TEST_IMAGE_SIZE, image_data_32)

  label10 = IupFlatLabel(NULL)
  IupSetAttributeHandle(label10, "IMAGE", image3)
  IupSetAttribute(label10, "RASTERSIZE", "250x100")
//  IupSetAttribute(label10, "RASTERSIZE", "150x50")
  IupSetAttribute(label10, "ALIGNMENT", "ARIGHT")
  IupSetCallback(label10, "BUTTON_CB", Icallback("button_cb"))
--  IupAppend(box2, label10)

  label11 = IupFlatLabel(NULL)
  IupSetAttribute(label11, "TITLE", "Very Long Text with_many characters and lots of words.")
//  IupSetAttribute(label11, "TEXTELLIPSIS", "Yes")
  IupSetAttribute(label11, "TEXTWRAP", "Yes")
  IupSetAttribute(label11, "RASTERSIZE", "250x100")
  //  IupSetAttribute(label11, "RASTERSIZE", "250x100")
  //  IupSetAttribute(label11, "RASTERSIZE", "150x50")
//  IupSetAttribute(label11, "ALIGNMENT", "ARIGHT")
--  IupAppend(box2, label11)

  box2 = IupVbox({label6,label7,fill,label8,label9,label10,label11})
  IupSetAttribute(box2, "MARGIN", "5x5")
  IupSetAttribute(box2, "GAP", "5")
  IupSetAttribute(box2, "BGCOLOR", "75 150 170")
//  IupSetAttribute(box2, "PADDING", "5x5")

  label12 = IupLabel(NULL)
  IupSetAttribute(label12, "SEPARATOR", "VERTICAL")


  dlg = IupDialog(IupHbox({box1, label12, box2}))
  IupSetAttribute(dlg, "TITLE", "IupFlatLabel Test")
//  IupSetAttribute(dlg, "BACKGROUND", "0 0 128")
//  IupSetAttributeHandle(dlg, "BACKGROUND", image2)
//  IupSetCallback(dlg, "ENTERWINDOW_CB", enter_cb)
//  IupSetAttribute(dlg, "FONT", "Helvetica, Bold 12")

  IupShow(dlg)
//  IupShowXY(dlg,IUP_LEFT,IUP_BOTTOM)
end procedure

IupOpen()
IupSetGlobalInt("UTF8MODE",true)
--IupImageLibOpen()
FlatLabelTest()
if platform()!=JS then
    IupMainLoop()
    IupClose()
end if

