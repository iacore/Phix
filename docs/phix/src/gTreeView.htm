<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">gTreeView</h1>
      <div id="mainSection">
       <table>
        <col style="width: 5%"/>
        <tr>
         <td>
          <b>Definition:</b>
         </td>
         <td>
            include xpGUI.e
           <br>
           <br>
            <a href="gdx.htm">gdx</a> tree_view = gTreeView([<a href="sequence.htm">sequence</a> tree_nodes={},]
                                                            <small>
                                                            [<a href="rtn.htm">rtn</a> branchopen=NULL, ]
                                                             <a href="string.htm">string</a> attributes="", 
                                                             <a href="html/glossary.htm#dwordseq">dword_seq</a> args={}</small>)
         </td>
        </tr>
        <tr>
         <td>
          <b>Description:</b>
         </td>
         <td>
            Creates a nested tree control with expandable/collapsable nodes from a simple [recursive] data structure.
            <br>
            <br>
            tree_nodes: a nested construct of the form {"<i>text</i>"[,attr][,children]}, suitable for passing to 
            <a href="gTreeAddNodes.htm">gTreeAddNodes</a>(). <br>
            branchopen: optional routine for deferred loading of sub-tree nodes, see <a href="#BRANCHOPEN">BRANCHOPEN</a>.<br>
            For more information on the attributes and args parameters see <a href="gSetAttributes.htm">gSetAttributes</a>().<br>
            This is a <a href="g_paranormal.htm">paranormalised function</a>.  <small>(see <a href="#tech" onclick="opentech()">technicalia</a>)</small>
            <br>
            <br>
            The tree_nodes parameter may be empty, or omitted on creation and set via <a href="gTreeAddNodes.htm">gTreeAddNodes</a>()
            at some later time.
            <br>
            <br>
            At the time of writing, few treeview attributes are supported, but in time I expect it will cope with at least
            <!--ACTIVE, COUNT, EXPAND, -->EXPANDNODE, CONTRACTNODE, FOCUSNODE, TOPITEM, VISIBLENODE, as well as having a few 
            more handler routines, probably.
            <br>
            <br>
<!--
OLD:
            {{{title,data[,image,id]}}[,pop_rid[,userdata]]}
            <br>
            <br>
            Each data[1][i] represents a node in the tree, and each element of data[1][i][2] holds a sequence of equivalent 
            structures, with pop_rid (if present) being invoked with the (outer) data structure, which should modify and 
            return an updated data structure.<br>
            Note that pop_rid is a routine_id() rather than an Icallback(), and can be specified as a bare name, without a
            routine_id("") wrapper. You can supply an image in "string" or {handle} form, whereas an integer id is added by 
            gTreeView when it gets displayed.
            <br>
            <br>
            For example, you might display your C: drive contents using a data of {{"C:",{}},populate,"C:\\"}, with populate() 
            replacing that first {} by details obtained from dir("C:\\").
            <br>
            <br>
            If you have a completed data structure, simply omit pop_rid.<br>
            If the pop_rid() leaves the top-level copy of itself in place, it is (re-)invoked every time that node is displayed, 
            with perhaps a flag it has set in userdata to indicate that, else it can be removed, along with userdata, or maybe 
            replaced with a lessor refresh(). It should also plant a copy of itself on each of the data[1][i][2] it populates, 
            unless perhaps that is a finished leaf node construct, along with whataver updated userdata any subsequent call 
            might need (eg the subdir path).
            <br>
            <br>
            The contents of userdata are not referenced in any way by this routine, merely forwarded to the pop_rid(), and can 
            even be completely omitted. Typically, as hinted above, I might expect the userdata to hold a full path, and 
            data[1][i][1] just the trailing file or directory name. Obviously you can also use a treeview for other 
            non-file-and-directory-related things.
            <br>
            <br>
            A suitable pop_rid might look something like this:
<X!X--eucode>
        function populate(sequence data)
            string path = data[3]
            sequence d = dir(data[3])
            for i=3 to length(d) do -- (skip . & ..)
                string name = d[i][1]
                sequence di = {name,{},populate,path&name}
                data[1][2] = append(data[1][2],di)
            end for
            data = data[1..1] -- (prevent re-invocation)
            return data
        end function
<X/eucode--X>
<XpreX>
<font color="#008080">        function</font><font color="#000000"> populate</font><font color="#0000FF">(</font><font color="#004080">sequence</font><font color="#000000"> data</font><font color="#0000FF">)</font>
<font color="#004080">            string</font><font color="#000000"> path</font><font color="#0000FF"> =</font><font color="#000000"> data</font><font color="#0000FF">[</font><font color="#000000">3</font><font color="#0000FF">]</font>
<font color="#004080">            sequence</font><font color="#000000"> d</font><font color="#0000FF"> =</font><font color="#5E005E"> dir</font><font color="#0000FF">(</font><font color="#000000">data</font><font color="#800000">[</font><font color="#000000">3</font><font color="#800000">]</font><font color="#0000FF">)</font>
<font color="#008080">            for</font><font color="#000000"> i</font><font color="#0000FF">=</font><font color="#000000">3</font><font color="#008080"> to</font><font color="#7060A8"> length</font><font color="#0000FF">(</font><font color="#000000">d</font><font color="#0000FF">)</font><font color="#008080"> do</font><font color="#000080"><i> -- (skip . &amp; ..)</i></font>
<font color="#004080">                string</font><font color="#000000"> name</font><font color="#0000FF"> =</font><font color="#000000"> d</font><font color="#0000FF">[</font><font color="#000000">i</font><font color="#0000FF">][</font><font color="#000000">1</font><font color="#0000FF">]</font>
<font color="#004080">                sequence</font><font color="#000000"> di</font><font color="#0000FF"> = {</font><font color="#000000">name</font><font color="#0000FF">,</font><font color="#800000">{}</font><font color="#0000FF">,</font><font color="#000000">populate</font><font color="#0000FF">,</font><font color="#000000">path</font><font color="#0000FF">&amp;</font><font color="#000000">name</font><font color="#0000FF">}</font>
<font color="#000000">                data</font><font color="#0000FF">[</font><font color="#000000">1</font><font color="#0000FF">][</font><font color="#000000">2</font><font color="#0000FF">] =</font><font color="#7060A8"> append</font><font color="#0000FF">(</font><font color="#000000">data</font><font color="#800000">[</font><font color="#000000">1</font><font color="#800000">][</font><font color="#000000">2</font><font color="#800000">]</font><font color="#0000FF">,</font><font color="#000000">di</font><font color="#0000FF">)</font>
<font color="#008080">            end for</font>
<font color="#000000">            data</font><font color="#0000FF"> =</font><font color="#000000"> data</font><font color="#0000FF">[</font><font color="#000000">1</font><font color="#0000FF">..</font><font color="#000000">1</font><font color="#0000FF">]</font><font color="#000080"><i> -- (prevent re-invocation)</i></font>
<font color="#008080">            return</font><font color="#000000"> data</font>
<font color="#008080">        end function</font>
<X/preX>

            Blah...
            <br>
            <br>
-->
            Returns: the identifier of the created element.
         </td>
        </tr>
        <tr>
         <td>
          <a href="p2js.htm"><span class="pwap2js"><b>pwa/p2js:</b></span></a>
         </td>
         <td>
            Supported.
         </td>
        </tr>
        <tr>
         <td>
          <b>See Also:</b>
         </td>
         <td>
          <a href="gTreeAddNodes.htm">gTreeAddNodes</a>
         </td>
        </tr>
        <tr>
         <td>
          <b>Example:</b>
         </td>
         <td>
<!--
            <div class="parent">
              <div class="child">
                Desktop appearance:
                <br>
                <br>
                <img width="240" height="160" src="images/gTreeView.png"/>
              </div>
              <div class="child">
                &nbsp;
              </div>
              <div class="child">
                Browser appearance:
                <br>
                <br>
                <img style="border: solid 1px #000000;" width="240" height="160" src="images/gTreeView2.png"/>
              </div>
            </div>
            <div style="clear:both;height:1px;"> </div>
-->
          <div style="float:left;">
           <small>
<!--eucode>
-- demo\xpGUI\gTreeView.exw
include xpGUI.e
constant tree_nodes = {"Figures",               -- (branch with 5 children)
                       {"Other",                -- (leaf)
                        {"triangle",            -- (branch with 3 children)
                         {"STATE","COLLAPSED"},
                         {"equilateral",
                          {"isoceles",          -- (branch with 2 children)
                           {"STATE","COLLAPSED"},
                           {"acute",
                            "obtuse"}},
                          "scalenus"}
                        },
                        {"parallelogram",       -- (branch with 2 children)
                         {"square",             -- (should be open on load)
                          "diamond"}},
                        "2D",                   -- (leaf)
                        {"3D",                  -- (branch)
                         {"STATE","COLLAPSED"}, -- (needed here)
                         {}},                   -- (empty)
                        {"4D",
                         {"STATE","COLLAPSED"},
                         {"some",
                          "other",
                          "branch"},
                         {"random data"} -- (iff attr and children present)
                        }
                       }
                      }

gdx tree_view = gTreeView(tree_nodes),
    dlg = gDialog(tree_view,`gTreeView`)
gShow(dlg)
gMainLoop()
</eucode-->
<pre>
<font color="#000080"><i>-- demo\xpGUI\gTreeView.exw</i></font>
<font color="#008080">include</font><font color="#000000"> xpGUI.e</font>
<font color="#008080">constant</font><font color="#000000"> tree_nodes</font><font color="#0000FF"> = {</font><font color="#008000">"Figures"</font><font color="#0000FF">,              </font><font color="#000080"><i> -- (branch with 5 children)</i></font>
<font color="#800000">                       {</font><font color="#008000">"Other"</font><font color="#0000FF">,               </font><font color="#000080"><i> -- (leaf)</i></font>
<font color="#800080">                        {</font><font color="#008000">"triangle"</font><font color="#0000FF">,           </font><font color="#000080"><i> -- (branch with 3 children)</i></font>
<font color="#00FF00">                         {</font><font color="#008000">"STATE"</font><font color="#0000FF">,</font><font color="#008000">"COLLAPSED"</font><font color="#00FF00">}</font><font color="#0000FF">,</font>
<font color="#00FF00">                         {</font><font color="#008000">"equilateral"</font><font color="#0000FF">,</font>
<font color="#000080">                          {</font><font color="#008000">"isoceles"</font><font color="#0000FF">,         </font><font color="#000080"><i> -- (branch with 2 children)</i></font>
<font color="#008000">                           {"STATE"</font><font color="#0000FF">,</font><font color="#008000">"COLLAPSED"}</font><font color="#0000FF">,</font>
<font color="#008000">                           {"acute"</font><font color="#0000FF">,</font>
<font color="#008000">                            "obtuse"}</font><font color="#000080">}</font><font color="#0000FF">,</font>
<font color="#008000">                          "scalenus"</font><font color="#00FF00">}</font>
<font color="#800080">                        }</font><font color="#0000FF">,</font>
<font color="#800080">                        {</font><font color="#008000">"parallelogram"</font><font color="#0000FF">,      </font><font color="#000080"><i> -- (branch with 2 children)</i></font>
<font color="#00FF00">                         {</font><font color="#008000">"square"</font><font color="#0000FF">,            </font><font color="#000080"><i> -- (should be open on load)</i></font>
<font color="#008000">                          "diamond"</font><font color="#00FF00">}</font><font color="#800080">}</font><font color="#0000FF">,</font>
<font color="#008000">                        "2D"</font><font color="#0000FF">,                  </font><font color="#000080"><i> -- (leaf)</i></font>
<font color="#800080">                        {</font><font color="#008000">"3D"</font><font color="#0000FF">,                 </font><font color="#000080"><i> -- (branch)</i></font>
<font color="#00FF00">                         {</font><font color="#008000">"STATE"</font><font color="#0000FF">,</font><font color="#008000">"COLLAPSED"</font><font color="#00FF00">}</font><font color="#0000FF">,</font><font color="#000080"><i> -- (needed here)</i></font>
<font color="#00FF00">                         {}</font><font color="#800080">}</font><font color="#0000FF">,                  </font><font color="#000080"><i> -- (empty)</i></font>
<font color="#800080">                        {</font><font color="#008000">"4D"</font><font color="#0000FF">,</font>
<font color="#00FF00">                         {</font><font color="#008000">"STATE"</font><font color="#0000FF">,</font><font color="#008000">"COLLAPSED"</font><font color="#00FF00">}</font><font color="#0000FF">,</font>
<font color="#00FF00">                         {</font><font color="#008000">"some"</font><font color="#0000FF">,</font>
<font color="#008000">                          "other"</font><font color="#0000FF">,</font>
<font color="#008000">                          "branch"</font><font color="#00FF00">}</font><font color="#0000FF">,</font>
<font color="#00FF00">                         {</font><font color="#008000">"random data"</font><font color="#00FF00">}</font><font color="#000080"><i> -- (iff attr and children present)</i></font>
<font color="#800080">                        }</font>
<font color="#800000">                       }</font>
<font color="#0000FF">                      }
</font>
<font color="#7060A8">gdx</font><font color="#000000"> tree_view</font><font color="#0000FF"> =</font><font color="#7060A8"> gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">),</font>
<font color="#000000">    dlg</font><font color="#0000FF"> =</font><font color="#7060A8"> gDialog</font><font color="#0000FF">(</font><font color="#000000">tree_view</font><font color="#0000FF">,</font><font color="#008000">`gTreeView`</font><font color="#0000FF">)</font>
<font color="#7060A8">gShow</font><font color="#0000FF">(</font><font color="#000000">dlg</font><font color="#0000FF">)</font>
<font color="#7060A8">gMainLoop</font><font color="#0000FF">()</font>
</pre>
           </small>
          </div>
          <div style="float:right;">
            <img alt="gTreeView" src="images/gTreeView.png" width="240" height="160">
            <div style="clear:right;" ><small><i>(note: that looks slightly different under GTK[3])</i></small></div>
          </div>
          <div class="clear"></div>
          <br>
            See also <a href="gTreeAddNodes.htm">gTreeAddNodes</a> for a more details of the structures, splitting/flattening them, and deferred loading.
         </td>
        </tr>
<!--
        <tr>
         <td>
          Images
         </td>
         <td>
            IupFlatTree has three types of images: one associated to the leaf, one to the collapsed branch and the other to the expanded branch. <br>
            Each image can be changed, both globally and individually.
            <br>
            <br>
            The predefined images used in IupFlatTree can be obtained by means of function <a href="IupSetHandle.htm">IupGetHandle</a>(). <br>
            The names of the predefined images are: IMGLEAF, IMGCOLLAPSED, IMGEXPANDED, IMGBLANK (blank sheet of paper) and IMGPAPER (written sheet of paper). <br>
            By default:
            <br>
            <br>
            "IMAGELEAF" uses "IMGLEAF" <br>
            "IMAGEBRANCHCOLLAPSED" uses "IMGCOLLAPSED" <br>
            "IMAGEBRANCHEXPANDED" uses "IMGEXPANDED"
            <br>
            <br>
            "IMGBLANK" and "IMGPAPER" are designed for use as "IMAGELEAF"
            <br>
            <br>
            The default images are 16x16 pixels on standard resolution and 24x24 pixels on high resolution (4k displays), 
            but you can force the use of the high resolution images by defining the global attribute "TREEIMAGE24" to "Yes".
            <br>
            <br>
            All imagens do NOT need to have the same size, but it is recommended that a pair of branch open and branch collapsed to have the same size.
            <br>
            <br>
            IMGEMPTY can be used as branches or leafs to clear the image (a totally transparent image).
         </td>
        </tr>
        <tr>
         <td>
          Simple Marking
         </td>
         <td>
            It is the default operation mode (MARKMODE=SINGLE). In this mode only one node can be selected.
         </td>
        </tr>
        <tr>
         <td>
          Multiple Marking
         </td>
         <td>
            IupFlatTree allows marking several nodes simultaneously using the Shift and Control keys. <br>
            To use multiple marking set MARKMODE=MULTIPLE. <br>
            Multiple nodes can also be selected using mouse dragging if SHOWDRAGDROP=NO.
          <br>
          <br>
            When a user keeps the Control key pressed, the individual marking mode is used. <br>
            This way, the focus node can be modified without changing the marked node. <br>
            To reverse a node marking, the user simply has to press the space bar.
          <br>
          <br>
            When the user keeps the Shift key pressed, the block marking mode is used. <br>
            This way, all nodes between the focus node and the initial node are marked, and all others are unmarked. <br>
            The initial node is changed every time a node is marked without the Shift key being pressed. <br>
            This happens when any movement is done without Shift or Control keys being pressed, or when the space bar is pressed together with Control.
         </td>
        </tr>
        <tr>
         <td>
          Navigation
         </td>
         <td>
            Using the keyboard:
          <ul>
           <li>Arrow Up/Down: Moves the focus node to the neighbor node, according to the arrow direction. 
                              If Shift is pressed and MARKMODE=MULTIPLE a continuous range of cells is selected.</li>
           <li>Home/End: Moves the focus node to the first/last node. </li>
           <li>Page Up/Page Down: Moves the focus node to the node one visible page above/below the focus node. </li>
           <li>Enter: If the focus node is an expanded branch, it is collapsed; if it is a collapsed branch, it is expanded; if it is a leaf, it is executed. </li>
           <li>Ctrl+Arrow Up/Down: Moves only the focus node. </li>
           <li>Ctrl+Space: Marks or unmarks the node at focus. </li>
           <li>F2: Calls the rename handler or invokes the in place rename. </li>
           <li>Esc: cancels in place rename. </li>
          </ul>
            Using the left mouse button:
          <ul>
           <li>Clicking a node: Moves the focus node to the clicked node. </li>
           <li>Clicking a (-/+) box: Makes the branch to the right of the (-/+) box collapse/expand. </li>
           <li>Double-clicking a node: Moves the focus node to the clicked node. 
                If the node is an expanded branch, it is collapsed; 
                if it is a collapsed branch, it is expanded; 
                if it is a leaf, it is executed. </li>
           <li>Clicking twice a node: Calls the rename handler or invokes the in place rename. </li>
           <li>Clicking and dragging a node: if SHOWDRAGDROP=Yes starts a drag. When mouse is released, the DRAGDROP_CB handler is called. <br>
                If the handler does not exist or if it returns <a href="gSetHandler.htm#XPG_CONTINUE">XPG_CONTINUE</a> then the node is moved to the new position. <br>
                If Ctrl is pressed then the node is copied instead of moved. In Motif drag is performed with the middle mouse button.
           </li>
          </ul>
            Removing a Node with "Del" <br>
            By default the Del key is not processed, but you can implement it using a simple
          <a href="gSetHandler.htm#KEY">KEY</a> handler:
        <br>
        <br><small>
<X!X--eucode>
    function key(gdx h, integer c)
        if c == VK_DEL then gSetAttribute(h,?"DELNODE",?"MARKED") end if 
        return XPG_CONTINUE
    end function
</eucode--X>
<Xpre>
<font color="#008080">    function</font><font color="#000000"> k_any</font><font color="#0000FF">(</font><font color="#5E005E">Ihandle</font><font color="#000000"> ih</font><font color="#0000FF">,</font><font color="#004080"> integer</font><font color="#000000"> c</font><font color="#0000FF">)</font>
<font color="#008080">        if</font><font color="#000000"> c</font><font color="#0000FF"> ==</font><font color="#004600"> K_DEL</font><font color="#008080"> then</font><font color="#5E005E"> IupSetAttribute</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000">"DELNODE"</font><font color="#0000FF">,</font><font color="#008000">"MARKED"</font><font color="#0000FF">)</font><font color="#008080"> end if 
        return</font><font color="#004600"> XPG_CONTINUE</font>
<font color="#008080">    end function</font>
<X/pre>
          </small>
         </td>
        </tr>

-->
<!--
        <tr>
         <td>
          Extra Functions
         </td>
         <td>
//          IupFlatTree has functions that allow associating a pointer (or a user defined id) to a node. <br>
            In order to do that, you provide the id of the node and the pointer (userid); even if the node&rsquo;s 
            id changes later on (because of insertions/deletions above/below it), the userid will still be associated with the given node. <br>
            A positive integer index, to some other table, is recommended in Phix, whereas using raw pointers would 
            most likely require additional/careful/tedious memory management.<br>
            These functions all use the USERDATAid attribute.
            <br>
            <br>
            IupFlatTree shares the same functions with <a href="IupTree.htm">IupTree</a>.
          <br>
          <a name="IupTreeSetUserId"></a>
          <br>
            <b>IupTreeSetUserId</b>(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id, <a href="atom.htm">atom</a> userid) <br>
            ih: Identifier of the interface element. <br>
            id: Node identifier. <br>
            userid: User index or pointer to be associated with the node. Use NULL to remove the association.
          <br>
          <br>
            Associates a userid with a given id. If the id of the node is changed, the userid remains the same.
            Terminates in error if the node cannot be found.
          <br>
          <a name="IupTreeGetUserId"></a>
          <br>
            <a href="atom.htm">atom</a> userid = <b>IupTreeGetUserId</b>(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id) <br>
            ih: Identifier of the interface element. <br>
            id: Node identifier.
          <br>
          <br>
            Returns the index or pointer associated to the node or NULL if none was associated. <br>
            IupTreeSetUserId must have been called for the node with the given id.
          <br>
          <a name="IupTreeGetId"></a>
          <br>
            <a href="integer.htm">integer</a> id = <b>IupTreeGetId</b>(<a href="Ihandle.htm">Ihandle</a> ih, <a href="atom.htm">atom</a> userid) <br>
            ih: Identifier of the interface element. <br>
            userid: Index or pointer associated to the node.
          <br>
          <br>
            Returns the id of the node that has the userid on success or -1 (nil) if not found. 
            IupTreeSetUserId must have been called with the same userid.
            <br>
            <br>
            The utility functions <a href="IupSetAttribute.htm#utility">IupSetAttributeId</a>, <a href="IupGetAttribute.htm#utility">IupGetAttributeId</a>, 
            <a href="IupGetAttribute.htm#utility">IupGetIntId</a>, <a href="IupGetAttribute.htm#utility">IupGetFloatId</a>, 
            <a href="IupSetStrAttribute.htm#utility">IupSetIntId</a>, and <a href="IupSetStrAttribute.htm#utility">IupSetFloatId</a>
            can also be used here, as well as <a href="IupTreeAddNodes.htm">IupTreeAddNodes</a>.
            <br>        
            <br>        
            They work just like the respective traditional set and get functions, but the attribute string is complemented with the id value. For example:
            <br>
            <br><small>
<X!--eucode>
IupSetAttributeId(ih, "KIND", 30, value) == IupSetAttribute(ih, "KIND30", value)
IupSetAttributeId(ih, "ADDLEAF", 10, value) == IupSetAttribute(ih, "ADDLEAF10", value)
</eucode--X>
<Xpre>
<font color="#5E005E">IupSetAttributeId</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "KIND"</font><font color="#0000FF">,</font><font color="#000000"> 30</font><font color="#0000FF">,</font><font color="#5E005E"> value</font><font color="#0000FF">) ==</font><font color="#5E005E"> IupSetAttribute</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "KIND30"</font><font color="#0000FF">,</font><font color="#5E005E"> value</font><font color="#0000FF">)</font>
<font color="#5E005E">IupSetAttributeId</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "ADDLEAF"</font><font color="#0000FF">,</font><font color="#000000"> 10</font><font color="#0000FF">,</font><font color="#5E005E"> value</font><font color="#0000FF">) ==</font><font color="#5E005E"> IupSetAttribute</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "ADDLEAF10"</font><font color="#0000FF">,</font><font color="#5E005E"> value</font><font color="#0000FF">)</font>
<X/pre>
            </small><br>
            These functions are faster than the traditional functions because they do not need to parse the attribute name string and the application 
            does not need to concatenate the attribute name with the id, although you will probably only notice if you are processing a <i>very</i>
            large tree.  Note that the C function <span class="illegal">IupSetfAttributeId</span> is not wrapped by pGUI, however that functionality 
            is covered by the optional parameters of <a href="IupSetStrAttribute.htm#utility">IupSetStrAttributeId</a>.
         </td>
        </tr>
-->
        <tr>
         <td>
          <b>Attributes:</b>
         </td>
         <td>
<!--
            Inherits all attributes and handlers of the <a href="IupCanvas.htm">IupCanvas</a>, but redefines a few attributes.
            <br>
            <br>
            Different from the <a href="IupTree.htm">IupTree</a>, all attributes are functional before map. <br>
            The attributes marked with (*) are exclusive to the IupFlatTree and are NOT support in the regular IupTree.
-->
         </td>
        </tr>
<!--
        <tr>
         <td>
          <b>General</b>
         </td>
         <td>
            
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
          AUTOREDRAW
         </td>
         <td>
            (non inheritable) automatically redraws the tree when something has change. <br>
            Set to NO to add many items to the tree without updating the display. Default: "YES".
         </td>
        </tr>
//      <tr>
//       <td>
//        <a href="gSetAttribute.htm#BGCOLOR">BGCOLOR</a>
//       </td>
//       <td>
//          Background color of the tree. Default: the global attribute <a href="gGetGlobal.htm#TXTBGCOLOR">TXTBGCOLOR</a>.
//       </td>
//      </tr>
        <tr>
         <td>
          BORDERCOLOR(*)
         </td>
         <td>
            color used for the internal border. Default: "50 150 255". This is for the internal border.
         </td>
        </tr>
        <tr>
         <td>
          BORDERWIDTH(*)
         </td>
         <td>
            line width used for the internal border. Default: "0". The internal borders are hidden by simply setting this value to 0. It is drawn inside the canvas, so inside the scrollbars.
         </td>
        </tr>
        <tr>
         <td>
          COUNT
         </td>
         <td>
            (read only, non inheritable) returns the total number of nodes in the tree.
         </td>
        </tr>
        <tr>
         <td>
          <a href="gSetAttribute.htm#EXPAND">EXPAND</a>
         </td>
         <td>
            (non inheritable) The default value is "YES".
         </td>
        </tr>
        <tr>
         <td>
          EXTRATEXTWIDTH(*)
         </td>
         <td>
            width of the extra text area at right. (since 3.30)
         </td>
        </tr>
//      <tr>
//       <td>
//        <a href="gSetAttribute.htm#FGCOLOR">FGCOLOR</a>
//       </td>
//       <td>
//          default text foreground color. <br>
//          Once each node is created it will not change its color when <a href="gSetAttribute.htm#FGCOLOR">FGCOLOR</a> is changed.<br>
//          Default: the global attribute <a href="gGetGlobal.htm#TXTFGCOLOR">TXTFGCOLOR</a>.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        HLCOLOR(*)
//       </td>
//       <td>
//          (non inheritable) color of a filled box drawn over the selected node. Default: TXTHLCOLOR global attribute.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        HLCOLORALPHA(*)
//       </td>
//       <td>
//          the transparency used to draw the selection. Default: 128. If set to 0 the selection box is not drawn.
//       </td>
//      </tr>
        <tr>
         <td>
          PSCOLOR(*)
         </td>
         <td>
            background color of a selected node. If not defined BACKCOLORid will be used. (since 3.30)
         </td>
        </tr>
        <tr>
         <td>
          TEXTPSCOLOR(*)
         </td>
         <td>
            foreground color of a selected node. If not defined FORECOLORid will be used. (since 3.30)
         </td>
        </tr>
        <tr>
         <td>
          ICONSPACING(*)
         </td>
         <td>
            (non inheritable) spacing between the image and the text. Default: "2".
         </td>
        </tr>
        <tr>
         <td>
          INDENTATION
         </td>
         <td>
            sets the indentation level in pixels. <br>
            Default: 16 for standard resolution, 24 for high resolution display.
         </td>
        </tr>
        <tr>
         <td>
//        <a href="gSetAttribute.htm#RASTERSIZE">RASTERSIZE</a>
         </td>
         <td>
            (non inheritable) the initial size is "400x200". Set to NULL to allow the automatic layout use smaller values.
         </td>
        </tr>
        <tr>
         <td>
          SPACING
         </td>
         <td>
            vertical space between nodes. Notice that this is not the same as the <a href="IupTree.htm">IupTree</a>.
         </td>
        </tr>
        <tr>
         <td>
          CSPACING
         </td>
         <td>
            same as SPACING but using the units of the vertical part of the SIZE attribute. It will actually set the SPACING attribute. (since 3.29)
         </td>
        </tr>
        <tr>
         <td>
          TOPITEM
         </td>
         <td>
            (write-only) position the given node identifier at the top of the tree or near to make it visible. <br>
            If any parent node is collapsed then they are automatically expanded.
         </td>
        </tr>
        <tr>
         <td>
          <i>invalid</i>
         </td>
         <td>
            The following are <b>not</b> used on IupFlatTree (unlike IupTree):<br>
            ADDROOT (behaves as if "NO"),  EMPTYAS3STATE (replaced with EMPTYTOGGLE), INFOTIP (uses regular TIP behaviour instead)
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
          <b>Expanders</b>
         </td>
         <td>
            (non inheritable)
         </td>
        </tr>
        <tr>
         <td>
          HIDEBUTTONS
         </td>
         <td>
            hide the expand and collapse buttons.
         </td>
        </tr>
        <tr>
         <td>
          HIDELINES
         </td>
         <td>
            hide the lines that connect the nodes in the hierarchy.
         </td>
        </tr>
        <tr>
         <td>
          LINECOLOR(*)
         </td>
         <td>
            the color of the dotted guidelines. Default: "110 110 110"
         </td>
        </tr>
//      <tr>
//       <td>
//        BUTTONBGCOLOR(*)
//       </td>
//       <td>
//          background color of the expander buttons. Default: "240 240 240"
//       </td>
//      </tr>
//      <tr>
//       <td>
//        BUTTONFGCOLOR(*)
//       </td>
//       <td>
//          sign color of the expander buttons ("+" or "-" signs). Default: "50 100 150"
//       </td>
//      </tr>
//      <tr>
//       <td>
//        BUTTONBRDCOLOR(*)
//       </td>
//       <td>
//          border color of the expander buttons. Default: "150 150 150"
//       </td>
//      </tr>
        <tr>
         <td>
          BUTTONSIZE(*)
         </td>
         <td>
            size of the expander button square. Default: 9 for standard resolution, 16 for high resolution display
         </td>
        </tr>
        <tr>
         <td>
          BUTTONPLUSIMAGE(*)
         </td>
         <td>
            the image name that will be shown for all expander button when collapsed. By default the button is drawn. <br>
            The "IMGPLUS" pre-defined image is a 9x9 image that can be used.
         </td>
        </tr>
        <tr>
         <td>
          BUTTONMINUSIMAGE(*)
         </td>
         <td>
            the image name that will be shown for all expander button when collapsed. By default the button is drawn. <br>
            The "IMGMINUS" pre-defined image is a 9x9 image that can be used.
         </td>
        </tr>

        <tr>
         <td>
          <b>Nodes</b>
         </td>
         <td>
            (non inheritable) For these attributes "id" is the specified node identifier. <br>
            If "id" is empty or invalid, then the focus node is used as the specified node.
         </td>
        </tr>
        <tr>
         <td>
          CHILDCOUNTid
         </td>
         <td>
            (read only) returns the immediate children count of the specified branch. <br>
            It does not count children of child that are branches.
         </td>
        </tr>
        <tr>
         <td>
          TOTALCHILDCOUNTid
         </td>
         <td>
            (read only) returns the total children count of the specified branch. It counts all grandchildren too.
         </td>
        </tr>
        <tr>
         <td>
          ROOTCOUNT
         </td>
         <td>
            (read only) returns the number of root nodes. (since 3.23)
         </td>
        </tr>
//      <tr>
//       <td>
//        COLORid
//       </td>
//       <td>
//          foreground color of the title at the given id. If not defined FGCOLOR is used. <br>
//          The value should be a string in the format "R G B" where R, G, B are numbers from 0 to 255.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        BACKCOLOR(*)
//       </td>
//       <td>
//          background color of the title at the given id. If not defined BGCOLOR is used.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        ITEMTIP(*)
//       </td>
//       <td>
//          tip of the node at the given id. If defined will be shown instead of the TIP attribute.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        DEPTHid
//       </td>
//       <td>
//          (read only) returns the depth of the specified node. <br>
//          The first node has depth=0, its immediate children has depth=1, their children has depth=2 and so on.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        KINDid
//       </td>
//       <td>
//          (read only) returns the kind of the specified node. <br>
//          Possible values:
//        <br>
//        <br>
//          "LEAF": The node is a leaf <br>
//          "BRANCH": The node is a branch
//       </td>
//      </tr>
        <tr>
         <td>
          PARENTid
         </td>
         <td>
            (read only) returns the identifier of the specified node.
         </td>
        </tr>
        <tr>
         <td>
          NEXTid
         </td>
         <td>
            (read only) returns the next brother (same depth) of the specified node. <br>
            Returns NULLs if at last child node of the parent (at the same depth).
         </td>
        </tr>
        <tr>
         <td>
          PREVIOUSid
         </td>
         <td>
            (read only) returns the previous brother (same depth) of the specified node. <br>
            Returns NULLs if at first child node of the parent (at the same depth).
         </td>
        </tr>
        <tr>
         <td>
          LASTid
         </td>
         <td>
            (read only) returns the last brother (same depth) of the specified node.
         </td>
        </tr>
        <tr>
         <td>
          FIRSTid
         </td>
         <td>
            (read only) returns the first brother (same depth) of the specified node. <br>
            This is the same as getting the first child of the parent of the given node. <br>
            If the specified node is the first child returns the specified node.
         </td>
        </tr>
        <tr>
         <td>
          STATEid
         </td>
         <td>
            the state of the specified branch. Returns NULL for a LEAF. <br>
            Possible values:
          <br>
          <br>
            "EXPANDED": Expanded branch state (shows its children) <br>
            "COLLAPSED": Collapsed branch state (hides its children)
         </td>
        </tr>
//      <tr>
//       <td>
//        TITLEid
//       </td>
//       <td>
//          the text label of the specified node.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        TITLEFONTid
//       </td>
//       <td>
//          the text font of the specified node. The format is the same as the <a href="gSetAttribute.htm#FONT">FONT</a> attribute.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        TITLEFONTSTYLEid
//       </td>
//       <td>
//          changes the font style of the specified node. Actually changes the TITLEFONTid attribute.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        TITLEFONTSIZEid
//       </td>
//       <td>
//          changes the font size of the specified node. Actually changes the TITLEFONTid attribute.
//       </td>
//      </tr>
        <tr>
         <td>
          USERDATAid
         </td>
         <td>
            the user data associated with the specified node.
         </td>
        </tr>
        <tr>
         <td>
          EXTRATEXTid(*)
         </td>
         <td>
            text displayed at the extra text area at right. (since 3.30)
         </td>
        </tr>

        <tr>
         <td>
          <b>Toggle</b>
         </td>
         <td>
            (non inheritable)
         </td>
        </tr>
        <tr>
         <td>
          SHOWTOGGLE
         </td>
         <td>
            enables the use of toggles for all nodes of the tree. <br>
            Can be "YES", "3STATE" or "NO". Default: "NO". <br>
         </td>
        </tr>
        <tr>
         <td>
          EMPTYTOGGLE(*)
         </td>
         <td>
            when SHOWTOGGLE=Yes, the empty space left in nodes that TOGGLEVISIBLEid=NO is filled with a blank space. Can be Yes or NO. Default: No.
         </td>
        </tr>
        <tr>
         <td>
          TOGGLEVALUEid
         </td>
         <td>
            defines the toggle state. Values can be "ON" or "OFF". <br>
            If SHOW3STATE=YES then can also be "NOTDEF". Default: "OFF".
         </td>
        </tr>
        <tr>
         <td>
          TOGGLEVISIBLEid
         </td>
         <td>
            defines the toggle visible state. Values can be "Yes" or "No". Default: "Yes".
         </td>
        </tr>
//      <tr>
//       <td>
//        TOGGLEBGCOLOR(*)
//       </td>
//       <td>
//          background color of the toggle. Default: "TXTBGCOLOR"
//       </td>
//      </tr>
//      <tr>
//       <td>
//        TOGGLEFGCOLOR(*)
//       </td>
//       <td>
//          foreground color of the toggle, use to draw the frame and the check mark. Default: "TXTFGCOLOR"
//       </td>
//      </tr>
        <tr>
         <td>
          TOGGLESIZE(*)
         </td>
         <td>
            size of the toggle square. Default: 16 for standard resolution, 24 for high resolution display
         </td>
        </tr>
        <tr>
         <td>
          <b>Images</b>
         </td>
         <td>
            (non inheritable)
         </td>
        </tr>
        <tr>
         <td>
          IMAGEid
         </td>
         <td>
            (write only) image name to be used in the specified node, where id is the specified node identifier. <br>
            Use <a href="IupSetHandle.htm">IupSetHandle</a> or <a href="IupSetAttributeHandle.htm">IupSetAttributeHandle</a> to associate an image to a name. 
            See also <a href="IupImage.htm">IupImage</a>. <br>
            If node is a branch it is used when collapsed.<br>
            All images do NOT need to have the same size, but it is recommended that a branch expanded and collapse images to have the same size.
         </td>
        </tr>
        <tr>
         <td>
          IMAGEEXPANDEDid
         </td>
         <td>
            (write only) same as the IMAGE attribute but used for expanded branches.
         </td>
        </tr>
        <tr>
         <td>
          IMAGELEAF
         </td>
         <td>
            the image name that will be shown for all leaves. Default: "IMGLEAF" (a bullet). <br>
            Internal values "IMGBLANK" (blank sheet of paper) and "IMGPAPER" (written sheet of paper) are also available. <br>
//          If <a href="gSetAttribute.htm#BGCOLOR">BGCOLOR</a> is set the image is automatically updated.
            This image defines the available space for the image in all nodes. <br>
            "IMGEMPTY" can be used as a totally transparent image .
         </td>
        </tr>
        <tr>
         <td>
          IMAGEBRANCHCOLLAPSED
         </td>
         <td>
            the image name that will be shown for all collapsed branches. Default: "IMGCOLLAPSED" (a closed folder).
         </td>
        </tr>
        <tr>
         <td>
          IMAGEBRANCHEXPANDED
         </td>
         <td>
            the image name that will be shown for all expanded branches. Default: "IMGEXPANDED" (an open folder).
         </td>
        </tr>
        <tr>
         <td>
          BACKIMAGE(*)
         </td>
         <td>
            image name to be used as background. <br>
            Use <a href="IupSetHandle.htm">IupSetHandle</a> or <a href="IupSetAttributeHandle.htm">IupSetAttributeHandle</a> to associate an image to a name. 
            See also <a href="IupImage.htm">IupImage</a>.
         </td>
        </tr>
        <tr>
         <td>
          BACKIMAGEZOOM(*)
         </td>
         <td>
            if set the back image will be zoomed to occupy the full background. Aspect ratio is NOT preserved. Can be Yes or No. Default: No.
         </td>
        </tr>
        <tr>
         <td>
          <b>Focus</b>
         </td>
         <td>
            (non inheritable)
         </td>
        </tr>
        <tr>
         <td>
          VALUE
         </td>
         <td>
            The focus node identifier. <br>
            When retrieved but there isn&rsquo;t a node with focus it returns 0 if there are any nodes, and returns -1 if there are no nodes. <br>
            When changed and MARKMODE=SINGLE the node is also selected. The tree is always scrolled so the node becomes visible. <br>
            Additionally accepts the values:
          <br>
          <br>
            "ROOT" or "FIRST": the first node (which is always expanded)<br>
            "LAST": the last expanded node <br>
            "NEXT": the next expanded node, one node after the focus node. If at the last does nothing <br>
            "PREVIOUS": the previous expanded node, one node before the focus node. If at the first does nothing <br>
            "PGDN": the next expanded node, ten nodes node after the focus node. If at the last does nothing <br>
            "PGUP": the previous expanded node, ten nodes before the focus node. If at the first does nothing <br>
            "CLEAR": clears the selection of the focus node.
         </td>
        </tr>
        <tr>
         <td>
          PROPAGATEFOCUS
         </td>
         <td>
            enables the focus handler forwarding to the next native parent with FOCUS_CB defined. Default: NO.
         </td>
        </tr>
        <tr>
         <td>
          FOCUSFEEDBACK(*)
         </td>
         <td>
            (non inheritable) draw the focus feedback. Can be Yes or No. Default: Yes.
         </td>
        </tr>
        <tr>
         <td>
          HASFOCUS(*)
         </td>
         <td>
            (read-only) returns the button state if has focus. Can be Yes or No. 
         </td>
        </tr>
-->
        <tr>
         <td>
          Also:
         </td>
         <td>
            <a href="gSetAttribute.htm#ACTIVE">ACTIVE</a>, 
            <a href="gSetAttribute.htm#CANFOCUS">CANFOCUS</a>, 
            <a href="gSetAttribute.htm#FONT">FONT</a>, 
<!--        <a href="gSetAttribute.htm#NAME">NAME</a>, -->
            <a href="gSetAttribute.htm#EXPAND">EXPAND</a>, 
<!--?           <a href="gSetAttribute.htm#POSITION">POSITION</a>, -->
<!--?           <a href="gSetAttribute.htm#SCREENPOSITION">SCREENPOSITION</a>, -->
            <a href="gSetAttribute.htm#MINSIZE">MINSIZE</a>, 
            <a href="gSetAttribute.htm#MAXSIZE">MAXSIZE</a>,
<!--            <a href="gSetAttribute.htm#WID">WID</a>, -->
            <a href="gGetAttribute.htm#SIZE">SIZE</a>, 
            <a href="gSetAttribute.htm#TIP">TIP</a>, 
<!--            <a href="gSetAttribute.htm#RASTERSIZE">RASTERSIZE</a>,-->
<!--            <a href="gSetAttribute.htm#ZORDER">ZORDER</a>,-->
            <a href="gSetAttribute.htm#VISIBLE">VISIBLE</a>.
<!--
            <br>
            <br>
?           Drag & Drop attributes are supported. See Notes above.
-->
         </td>
        </tr>
<!--
        <tr>
         <td>
          <b>Marks</b>
         </td>
         <td>
            (non inheritable)
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
          MARK
         </td>
         <td>
            (write only) Selects a range of nodes in the format "start-end" (%d-%d). <br>
            Allowed only when MARKMODE=MULTIPLE. Also accepts the values:
          <br>
          <br>
            "INVERTid": Inverts the specified node selected state, where id is the specified node identifier. If id is empty or invalid, then the focus node is used as reference node. <br>
            "BLOCK": Selects all nodes between the focus node and the initial block-marking node defined by MARKSTART <br>
            "CLEARALL": Clear the selection of all nodes <br>
            "MARKALL": Selects all nodes <br>
            "INVERTALL": Inverts the selection of all nodes
         </td>
        </tr>
        <tr>
         <td>
          MARKEDid
         </td>
         <td>
            The selection state of the specified node, where id is the specified node identifier. <br>
            If id is empty or invalid, then the focus node is used as reference node. Can be: YES or NO. Default: NO
         </td>
        </tr>
        <tr>
         <td>
          MARKEDNODES
         </td>
         <td>
            The selection state of all nodes. <br>
            It is/accepts a sequence of '+' and '-' symbols indicating the state of each item ('+'=selected, '-'=unselected). <br>
            When setting this value, if the number of specified symbols is smaller than the total count then the remaining nodes will not be changed.<br>
            Can be set only when MARKMODE=MULTIPLE, can also be get when MARKMODE=SINGLE.
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
?         MARKMODE
         </td>
         <td>
            (not yet implemented , but planned)
            defines how the nodes can be selected. Can be: SINGLE or MULTIPLE. Default: SINGLE.
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
          MARKSTART
         </td>
         <td>
            Defines the initial node for the block marking, used when MARK=BLOCK.<br>
            The value must be the node identifier. Default: 0 (first node).
         </td>
        </tr>
        <tr>
         <td>
          MARKWHENTOGGLE
         </td>
         <td>
            selects or clears the selection of a node when its toggle is changed. <br>
            Works only if the node has a toggle. Default: No.
         </td>
        </tr>

        <tr>
         <td>
          <b>Hierarchy</b>
         </td>
         <td>
            (non inheritable) For these attributes "id" is the specified node identifier. <br>
            If "id" is empty or invalid, then the focus node is used as the specified node.
         </td>
        </tr>
        <tr>
         <td>
          ADDEXPANDED
         </td>
         <td>
            (non inheritable) Defines if branches will be expanded when created.  <br>
            The branch will be actually expanded when it receives the first child.  <br>
            Possible values: "YES" = The branches will be created expanded; "NO" = The branches will be created collapsed. Default: "YES".
         </td>
        </tr>
        <tr>
         <td>
          ADDLEAFid
         </td>
         <td>
            (write only) Adds a new leaf after the reference node, where id is the reference node identifier. <br>
            Use id=-1 to add before the first node. The value is used as the text label of the new node. <br>
            The id of the new node will be the id of the reference node + 1. <br>
            The attribute LASTADDNODE is set to the new id. <br>
            The reference node is marked and all others unmarked. <br>
            The reference node position remains the same. <br>
            If the reference node does not exist, nothing happens. <br>
            If the reference node is a branch then the depth of the new node is one depth increment from the depth of the reference node, <br>
            if the reference node is a leaf then the new node has the same depth. <br>
            If you need to add a node after a specified node but at a different depth use INSERTLEAF.
         </td>
        </tr>
        <tr>
         <td>
          ADDBRANCHid
         </td>
         <td>
            (write only) Same as ADDLEAF for branches. Branches can be created expanded or collapsed depending on ADDEXPANDED.
            <br>
            <br>
            <div id="images" class="images" align="center">
            <table border="1">
            <tbody align="center">
            <tr>
             <th>Initial layout</th>
             <th>After calling <code>IupSetAttribute(ADDBRANCH9, "new branch")</code>:</th>
            </tr>
            <tr>
             <td><img src="images/iuptree1.png"/></td>
             <td><img src="images/iuptree2_addbranch9.png"/></td>
            </tr>
            </tbody>
            </table>
            </div>
         </td>
        </tr>
        <tr>
         <td>
          COPYNODEid
         </td>
         <td>
            (write only) Copies a node and its children, where id is the specified node identifier. <br>
            The value is the destination node identifier. <br>
            If the destination node is a branch and it is expanded, then the specified node is inserted as the first child of the destination node. <br>
            If the branch is not expanded or the destination node is a leaf, then it is inserted as the next brother of the leaf. <br>
            The specified node is not changed. All node attributes are copied, except user data.
         </td>
        </tr>
        <tr>
         <td>
          DELNODEid
         </td>
         <td>
            (write only) Removes a node and/or its children, where id is the specified node identifier. <br>
            Possible values:
          <br>
          <br>
            "ALL": deletes all nodes, id is ignored. <br>
            "SELECTED": deletes the specified node and its children <br>
            "CHILDREN": deletes only the children of the specified node  <br>
            "MARKED": deletes all the selected nodes (and all their children), id is ignored
         </td>
        </tr>
        <tr>
         <td>
          EXPANDALL
         </td>
         <td>
            (write only) expand or contracts all nodes. Can be YES (expand all), or NO (contract all).
         </td>
        </tr>
        <tr>
         <td>
          INSERTLEAFid, <br>
          INSERTBRANCHid
         </td>
         <td>
            (write only) Same as ADDLEAF and ADDBRANCH but the depth of the new node is always the same of the reference node. <br>
            If the reference node is a leaf, then the id of the new node will be the id of the reference node + 1. <br>
            If the reference node is a branch the id of the new node will be the id of the reference node + 1 + the total number of child nodes of the reference node.
            <br>
            <br>
            <div id="images" class="images" align="center">
            <table border="1">
            <tbody align="center">
            <tr>
             <th>Initial layout</th>
             <th>After calling <code>IupSetAttribute(INSERTBRANCH9, "new branch")</code>:</th>
            </tr>
            <tr>
             <td><img src="images/iuptree1.png"/></td>
             <td><img src="images/iuptree3_insertbranch9.png"/></td>
            </tr>
            </tbody>
            </table>
            </div>
         </td>
        </tr>
        <tr>
         <td>
          MOVENODEid
         </td>
         <td>
            (write only): Moves a node and its children, where id is the specified node identifier. <br>
            The value is the destination node identifier. <br>
            If the destination node is a branch and it is expanded, then the specified node is inserted as the first child of the destination node. <br>
            If the branch is not expanded or the destination node is a leaf, then it is inserted as the next brother of the leaf. <br>
            The specified node is removed. User data and all node attributes are preserved.
         </td>
        </tr>

        <tr>
         <td>
          <b>Editing</b>
         </td>
         <td>

         </td>
        </tr>
        <tr>
         <td>
          RENAME
         </td>
         <td>
            (write only) Forces a rename action to take place. Valid only when SHOWRENAME=YES.
         </td>
        </tr>
        <tr>
         <td>
          RENAMECARET
         </td>
         <td>
            (write only) the caret&rsquo;s position of the text box when in-place renaming. <br>
            Same as the CARET attribute for <a href="IupText.htm">IupText</a>, but here is used only once after SHOWRENAME_CB is called and before the text box is shown.
         </td>
        </tr>
        <tr>
         <td>
          RENAMESELECTION
         </td>
         <td>
            (write only) the selection interval of the text box when in-place renaming. <br>
            Same as the SELECTION attribute for <a href="IupText.htm">IupText</a>, but here is used only once after SHOWRENAME_CB is called and before the text box is shown.
         </td>
        </tr>
        <tr>
         <td>
          SHOWRENAME
         </td>
         <td>
            (non inheritable) Allows the in place rename of a node. Default: "NO". <br>
            F2 and clicking twice only starts to rename a node if SHOWRENAME=Yes.
         </td>
        </tr>

        <tr>
         <td>
          <b>Drag&Drop</b>
         </td>
         <td>
            Drag & Drop attributes are supported, but SHOWDRAGDROP must be set no No.  
         </td>
        </tr>
        <tr>
         <td>
          DRAGDROPTREE
         </td>
         <td>
            (non inheritable) prepare the Drag & Drop handlers to support drag and drop of nodes between trees (IupFlatTree only), in the same IUP application. <br>
            Drag & Drop attributes still need to be set in order to activate the drag & drop support, so the application can control if this tree will be source and/or target. <br>
            Default: NO.
         </td>
        </tr>
        <tr>
         <td>
          DROPFILESTARGET
         </td>
         <td>
            (non inheritable) Enable or disable the drop of files. <br>
            Default: NO, but if DROPFILES_CB is defined when the element is mapped then it will be automatically enabled. <br>
            This is NOT related to the drag&drop of nodes inside the tree.
         </td>
        </tr>
        <tr>
         <td>
          DROPEQUALDRAG
         </td>
         <td>
            (non inheritable) if enabled will allow a drop node to be equal to the drag node. <br>
            Used only if SHOWDRAGDROP =Yes. <br>
            In the case the nodes are equal the handler return value is ignored and nothing is done after.
         </td>
        </tr>
        <tr>
         <td>
          SHOWDRAGDROP
         </td>
         <td>
            (non inheritable) Enables the internal drag and drop of nodes, and enables the DRAGDROP_CB handler. Default: "NO". <br>
            Works only if MARKMODE=SINGLE. Drag & Drop attributes are NOT used.
         </td>
        </tr>
-->
        <tr>
         <td>
          <b>Handlers:</b>
         </td>
         <td>
            <br>
<!--
            Inherits all handlers of the <a href="IupCanvas.htm">IupCanvas</a>, but redefines a few of them. <br>
??ERM??     Including <a href="gSetHandler.htm#CLICK">CLICK</a>, <a href="gSetHandler.htm#LEAVEWINDOW_CB">LEAVEWINDOW_CB</a>,
?           <a href="gSetHandler.htm#FOCUS_CB">FOCUS_CB</a>, and <a href="gSetHandler.htm#MOOUSEMOVE">MOUSEMOVE</a>.
            To allow the application to use those handlers the same handlers are exported with the "FLAT_" prefix using the same parameters.<br>
            They are all called before the internal handlers and if they return <a href="gSetHandler.htm#XPG_IGNORE">XPG_IGNORE</a>
            the internal handlers are not processed.
            <br>
            <br>
            Drag & Drop attributes and handlers are supported, but SHOWDRAGDROP must be set to NO.
-->
          <a name=BRANCHOPEN></a>
         </td>
        </tr>
        <tr>
         <td>
          BRANCHOPEN
         </td>
         <td>
            Event generated when a branch is expanded, and intended for implementing deferred (sub-tree) loading.
            <br>
            <br>
            procedure branchopen(<a href="object.htm">object</a> treenode)
            <br>
            <br>
            treenode: opaque/backend-specific, suitable for passing directly to gTreeGetUserId() and gTreeAddNodes(). <br>
            Currently under GTK it is {treeview,iter,path}, under WinAPI it is {treeview,TreeIdx}, and under p2js it is a 
            HTMLUListElement: you may be able to do a few dirty little debug tricks with it, but should cease and desist 
            from doing anything like that in the finished code, plus those details may well change in a future release.
            <br>
            <br>
            Should you not want a user to open a branch, simply don&rsquo;t put any children in there in the first place.
            <br>
            <br>
            Deferred loading is not worthwhile for a tree the size of the one shown above, but it certainly would be when 
            loading a hard drive (for instance, try right clicking on C:\Windows, select Properties, and watch it start 
            counting, then imagine staring at a blank screen until it finishes) or perhaps a database containing several 
            decades-worth of detailed historical information. 
            <br>
            <br>
            The <a href="gTreeAddNodes.htm">gTreeAddNodes example</a> showcases deferred loading, however you are free to 
            replace "tree_data" with anything you like[/can massage into the right format], including a database or even an 
            (ideally asynchronous) remote fetch that triggers that code (in the main thread) when it completes.
         </td>
        </tr>
<!--
        <tr>
         <td>
          SELECTION_CB
         </td>
         <td>
            Event generated when a node is selected or deselected.
            <br>
            <br>
            This event occurs when the user clicks with the mouse or uses the keyboard with the appropriate combination of keys. <br>
            It may be called more than once for the same node with the same status.
            <br>
            <br>
            function selection_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id, status)<br>
            ih: identifier of the element that activated the event. <br>
            id: Node identifier.<br>
            status: 1=node selected, 0=node unselected. 
         </td>
        </tr>
        <tr>
         <td>
          MULTISELECTION_CB
         </td>
         <td>
            Event generated after a continuous range of nodes is selected in one single operation. <br>
            If not defined the SELECTION_CB with status=1 will be called for all nodes in the range. <br>
            The range is always completely included, independent if some nodes were already marked. <br>
            That single operation also guaranties that all other nodes outside the range are already not selected. <br>
            Called only if MARKMODE=MULTIPLE.
            <br>
            <br>
            function multiselection_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="atom.htm">atom</a> pIds, <a href="integer.htm">integer</a> n)<br>
            ih: identifier of the element that activated the event. <br>
            pIds: Pointer to an array of node identifiers. <br>
            This array is kept for backward compatibility, the range is simply defined by ids[0] to ids[n-1], where ids[i+1]=ids[i]+1.<br>
            n: Number of nodes in the array.
         </td>
        </tr>
        <tr>
         <td>
          MULTIUNSELECTION_CB
         </td>
         <td>
            Event generated before multiple nodes are unselected in one single operation. <br>
            If not defined the SELECTION_CB with status=0 will be called for all nodes in the range. <br>
            The range is not necessarily continuous. Called only if MARKMODE=MULTIPLE. (Since 3.1)
            <br>
            <br>
            function multiunselection_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="atom.htm">atom</a> pIds, <a href="integer.htm">integer</a> n)<br>
            ih: identifier of the element that activated the event. <br>
            pIds: Pointer to an array of node identifiers.<br>
            n: Number of nodes in the array.
         </td>
        </tr>
-->
<!--
        <tr>
         <td>
          BRANCHCLOSE_CB
         </td>
         <td>
            Event generated when a branch is collapsed. <br>
            This event occurs when the user clicks the "-" sign on the left of the branch, or when double clicks the branch, or hits Enter on an expanded branch. 
            <br>
            <br>
            function branchclose_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier. 
            <br>
            <br>
            Returns: <a href="gSetHandler.htm#XPG_IGNORE">XPG_IGNORE</a> for the branch not to be closed, or 
            <a href="gSetHandler.htm#XPG_DEFAULT">XPG_DEFAULT</a> for the branch to be closed.
         </td>
        </tr>
        <tr>
         <td>
          EXECUTELEAF_CB
         </td>
         <td>
            Event generated when a leaf is to be executed. <br>
            This event occurs when the user double clicks a leaf, or hits Enter on a leaf. 
            <br>
            <br>
            function executeleaf_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier.  
         </td>
        </tr>
        <tr>
         <td>
          EXECUTEBRANCH_CB
         </td>
         <td>
            Event generated when a branch is executed. <br>
            This event occurs when the user double clicks a branch, or hits Enter on a branch. <br>
            Is is called before the BRANCH*_CB handlers.
            <br>
            <br>
            function executebranch_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier.  
         </td>
        </tr>
        <tr>
         <td>
          SHOWRENAME_CB
         </td>
         <td>
            Event generated when a node is about to be renamed. <br>
            It occurs when the user clicks twice the node or press F2. Called only if SHOWRENAME=YES.
            <br>
            <br>
            function showrename_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier.  
            <br>
            <br>
            Returns: if <a href="gSetHandler.htm#XPG_IGNORE">XPG_IGNORE</a> is returned, the rename is canceled.
         </td>
        </tr>
        <tr>
         <td>
          RENAME_CB
         </td>
         <td>
            Event generated after a node was renamed in place. <br>
            It occurs when the user press Enter after editing the name, or when the text box looses it focus. Called only if SHOWRENAME=YES.
            <br>
            <br>
            function rename_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id, <a href="atom.htm">atom</a> pTitle)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier. <br>
            pTitle: new node title (a char*). 
            <br>
            <br>
            Returns: The new title is accepted only if the handler returns <a href="gSetHandler.htm#XPG_DEFAULT">XPG_DEFAULT</a>. <br>
            If the handler does not exist the new title is always accepted. <br>
            If the user pressed Enter and the handler returns <a href="gSetHandler.htm#XPG_IGNORE">XPG_IGNORE</a> the editing continues. <br>
            If the text box looses its focus the editing stops always.
         </td>
        </tr>
        <tr>
         <td>
          DRAGDROP_CB
         </td>
         <td>
            Event generated when an internal drag & drop is executed. Only active if SHOWDRAGDROP=YES.
            <br>
            <br>
            function dragdrop_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> drag_id, drop_id, isshift, iscontrol)
            <br> 
            <br> 
            ih: identifier of the element that activated the event. <br>
            drag_id: Identifier of the clicked node where the drag start. <br>
            drop_id: Identifier of the clicked node where the drop were executed. -1 indicates a drop in a blank area.<br>
            isshift: flag indicating the shift key state. <br>
            iscontrol: flag indicating the control key state.
            <br>
            <br>
            Returns: if returns <a href="gSetHandler.htm#XPG_CONTINUE">XPG_CONTINUE</a>, or if the handler is not defined 
            and SHOWDRAGDROP=YES, then the node is moved to the new position. <br>
            If Ctrl is pressed then the node is copied instead of moved. <br>
            If the drop node is a branch and it is expanded, then the drag node is inserted as the first child of the node. <br>
            If the branch is not expanded or the node is a leaf, then the drag node is inserted as the next brother of the drop node.
         </td>
        </tr>
        <tr>
         <td>
          NODEREMOVED_CB
         </td>
         <td>
            Event generated when a node is about to be removed.<br>
            It is only a notification, the event can not be aborted. <br>
            No node dependent attribute can be consulted during the handler. <br>
            It is useful to remove memory allocated for the userdata.
            <br>
            <br>
            function noderemoved_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="atom.htm">atom</a> pUserdata)<br> 
            ih: identifier of the element that activated the event. <br>
            pUserdata: pointer to userdata.
         </td>
        </tr>
        <tr>
         <td>
          RIGHTCLICK_CB
         </td>
         <td>
            Event generated when the right mouse button is pressed over a node.
            <br>
            <br>
            function rightclick_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id)<br>
            ih: identifier of the element that activated the event. <br>
            id: node identifier. 
         </td>
        </tr>
        <tr>
         <td>
          TOGGLEVALUE_CB
         </td>
         <td>
            Event generated when the toggle&rsquo;s state was changed. <br>
            The handler also receives the new toggle&rsquo;s state.
            <br>
            <br>
            function togglevalue_cb(<a href="Ihandle.htm">Ihandle</a> ih, <a href="integer.htm">integer</a> id, state)<br>
            ih: identifier of the element that activated the event.<br>
            id: node identifier. <br>
            state: 1 if the toggle&rsquo;s state was shifted to ON; 0 if it was shifted to OFF. If SHOW3STATE=YES, -1 if it was shifted to NOTDEF.
         </td>
        </tr>
//      <tr>
//       <td>
//        FLAT_BUTTON_CB
//       </td>
//       <td>
//          Event generated when any mouse button is pressed or released inside the element. <br>
//          Use <a href="IupConvertXYToPos.htm">IupConvertXYToPos</a>() to convert (x,y) coordinates in the node identifier.
//       </td>
//      </tr>
//      <tr>
//       <td>
//        FLAT_MOTION_CB
//       </td>
//       <td>
//          Event generated when the mouse is moved over the element. <br>
//          Use <a href="IupConvertXYToPos.htm">IupConvertXYToPos</a>() to convert (x,y) coordinates in item the node identifier.
//       </td>
//      </tr>
        <tr>
         <td>
          DROPFILES_CB
         </td>
         <td>
            [Windows and GTK Only] Event generated when one or more files are dropped in the element.
         </td>
        </tr>
-->
        <tr>
         <td>
          also
         </td>
         <td>
<!--
//          <a href="gSetHandler.htm#MAP_CB">MAP_CB</a>,
//          <a href="gSetHandler.htm#UNMAP_CB">UNMAP_CB</a>,
//          <a href="gSetHandler.htm#DESTROY_CB">DESTROY_CB</a>,
-->
<!--
            <a href="gSetHandler.htm#GETFOCUS_CB">GETFOCUS_CB</a>,
            <a href="gSetHandler.htm#KILLFOCUS_CB">KILLFOCUS_CB</a>, 
            <a href="gSetHandler.htm#ENTERWINDOW_CB">ENTERWINDOW_CB</a>,
            <a href="gSetHandler.htm#LEAVEWINDOW_CB">LEAVEWINDOW_CB</a>, 
-->
<!--            <a href="gSetHandler.htm#HELP_CB">HELP_CB</a>-->
            <a href="gSetHandler.htm#KEY">KEY</a>: All common handlers are supported.<br>
          <a name=tech></a>
         </td>
        </tr>
        <tr id="Technicalia" style="display:none;">
         <td>
          <a href="glossary.htm#technicalia">
           <b>Technicalia</b>
          </a>
         </td>
         <td>
            As this is a <a href="g_paranormal.htm">paranormalised function</a>, and with no expectation that you should attempt to memorise 
            this lot, except maybe "qraa", you can assume that all of the following are potentially perfectly valid, with the fairly obvious 
            restriction that any parameters <i>must</i> be in strict qraa-order, and no args without attributes:
            <br>
            <br>
<small>
<!--eucode>
                        gTreeView()
                        gTreeView(branchopen)
                        gTreeView(attributes)
                        gTreeView(attributes, args)
                        gTreeView(branchopen, attributes)
                        gTreeView(branchopen, attributes, args)
                        gTreeView(tree_nodes)
                        gTreeView(tree_nodes, branchopen)
                        gTreeView(tree_nodes, attributes)
                        gTreeView(tree_nodes, attributes, args)
                        gTreeView(tree_nodes, branchopen, attributes)
                        gTreeView(tree_nodes, branchopen, attributes, args)     -- (the full set)
</eucode-->
<pre>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">()</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">branchopen</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">attributes</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">attributes</font><font color="#0000FF">,</font><font color="#000000"> args</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">branchopen</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">branchopen</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">,</font><font color="#000000"> args</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">,</font><font color="#000000"> branchopen</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">,</font><font color="#000000"> args</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">,</font><font color="#000000"> branchopen</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">)</font>
<font color="#7060A8">                        gTreeView</font><font color="#0000FF">(</font><font color="#000000">tree_nodes</font><font color="#0000FF">,</font><font color="#000000"> branchopen</font><font color="#0000FF">,</font><font color="#000000"> attributes</font><font color="#0000FF">,</font><font color="#000000"> args</font><font color="#0000FF">)    </font><font color="#000080"><i> -- (the full set)</i></font>
</pre>
</small>
            <br>
            Note that in practice rid is actually defined as <a href="object.htm">object</a>, and attributes as
            a <a href="sequence.htm">sequence</a> rather than a string, however both are thoroughly verified to 
            be of the documented types, after being repositioned via xpGUI.e/paranormalise_qraa().
<!--
            <br>
            <br>
            Also note that a gTreeView is the only xpGUI control to use builtin scrollbars, whereas a <a href="gCanvas.htm">gCanvas</a>, and hence
            those based on said (<a href="gGraph.htm">gGraph</a>, <a href="gList.htm">gList</a>, and <a href="gTable.htm">gTable</a>) have ... [DEV]
-->
         </td>
        </tr>
       </table>
       <img id="Timg" src="images/sprites/tech.open.png" title="Expand/Shrink" alt="Expand/Shrink" style="display:block;clear:both;" onload="setStartT(this);" onclick="changeImageT(this);" />
<!--
//          A gTreeView is a Phix/pGUI invention, expressly written for 
//          <a href="p2js.htm"><span class="pwap2js"><b>pwa/p2js</b></span></a>,
//          but can of course be used for desktop/Phix-only purposes.<br>
//          The desktop version wraps IupFlatTree() with IupTreeAddNodes(), in other words a restricted/easier subset.<br>
//          The equivalent functionality is implemented in the browser using nested ul/li with a tiny embedded gif and a 
//          a small handful of suitable unicode characters, plus of course about 300 lines of handcrafted javascript/CSS.
//          <br>
//          <br>
//          The main purpose of this page is to show <b>only</b> pwa/p2js supported features, in preference to littering 
//          the IupFlatTree page with dozens if not hundreds of "not supported" markers.
//          <br>
//          <br>
//          Note, for example, that USERDATA is used internally, so that and IupTreeSet/Get[User]Id() are not available 
//          to the application, at least not in any generally useful way, other than as dictated below. In fact,
//          <a href="IupFlatTree.htm">IupTreeGetUserId</a>() is effectively a null-op on the browser, however it is
//          required on the desktop because of the way IUP renumbers nodes as predecessors are inserted.
//          <br>
//          <br>
-->
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
       <br>
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
