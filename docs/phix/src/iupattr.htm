<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">Attributes</h1>
      <div id="mainSection">
        On the first reading, you should assume something like
       <code>button = IupButton("button")</code> and without worrying too much about the
        technical details of that, it should be obvious that it creates a button. Equally I am sure you can imagine a fairly long list of things
        you might want to alter: size, font, colour, dynamically change the text, add an image, enable/disable it, and of course configure what
        happens when it is clicked. 
        Aside: in IUP element position is dynamically determined through nested containers and fillers, though if you are adamantly married to 
        specifying everything in pixels you could always try using an IupCbox.<!--DEV-->
       <br>
       <br>
        All of that, even the callbacks, is achieved through the use of attributes.
       <br>
       <br>
        Without looking at the C source, I would hazard that all attributes are in fact stored as pointers, or more accurately machine-sized 
        words, which delivers high performance, with a handful of selected routines carefully taking a copy of any volatile strings, floats, 
        etc and keeping them safe for the duration. My first reaction was predictable enough given my obsession with performance, but once I 
        accepted it is no big deal to convert "200" to 200, or "YES/NO" to 1/0, I realised it is a pretty good way to keep things simple.
       <br>
       <br>
        The majority of attributes are implemented using text strings, but there are also routines for storing (and perhaps more importantly
        retrieving) numbers, pointers, etc. Depending on the interface element, some attributes are inheritable (eg BGCOLOR on an IupButton: 
        ie if not specifically set, a button takes on the background colour of whatever control it is sitting on), and some attributes are 
        non-inheritable (eg TITLE). Some must be set at creation time, ie before the dialog is first displayed (eg CANFOCUS), while others 
        can be amended on the fly (eg <a href="iupattr.htm#ACTIVE">ACTIVE</a>), and some are read-only, or platform-specific. Whilst most
        attributes are static, referred to as needed, a few trigger actions when read or set (eg <a href="iupgattr.htm#KEY">KEY</a>).
        These are all documented for each element type.
       <br>
       <br>
        You can also set bespoke application-specific attributes on any control, which the underlying platform-specific driver will completely 
        ignore. The most likely thing I can think of where that might be useful would be to have a single callback that deals with several 
        controls, which fetches an attribute off the control that triggered it, and tweaks the behaviour accordingly. Perhaps (I have not 
        tried this) a clock application could have a single callback that gets called by three timers, and draws the hour, minute, and second 
        hand appropriately, but I digress...
       <br>
       <br>
        The point I am trying to make here is that, sheer number of different controls aside, by and large the core of IUP is jaw-droppingly 
        trivial - all the important stuff gets controlled by attributes. Equally there are quite a few ways to set and retrieve attributes,
        of which there are plenty knocking about, but otherwise the attribute system itself is also conceptually quite trivial.
       <br>
       <br>
        The following routines are used to set/retrieve attributes:
       <br>
       <br>
        <table>
         <col style="width: 5%"/>
         <tr>
          <td valign=top>
           <a href="IupSetAttribute.htm">
            <b>IupSetAttribute</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Sets an interface element attribute.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetStrAttribute.htm">
            <b>IupSetStrAttribute</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Sets an interface element attribute, making a safe copy of any transient string.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetAttributes.htm">
            <b>IupSetAttributes</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Sets several attributes of an interface element.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupResetAttribute.htm">
            <b>IupResetAttribute</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Removes an attribute
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetAttribute.htm">
            <b>IupGetAttribute</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Retrieve an interface element attribute value.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetAllAttributes.htm">
            <b>IupGetAllAttributes</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns a list of attribute names.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetAttributeHandle.htm">
            <b>IupSetAttributeHandle</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Sets an attribute to a handle (instead of the usual string).
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetGlobal.htm">
            <b>IupSetGlobal</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Sets an attribute in the global environment.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetGlobal.htm">
            <b>IupGetGlobal</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns an attribute value from the global environment.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetCallback.htm">
            <b>IupSetCallback</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Associates a callback to an event.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetCallback.htm">
            <b>IupGetCallback</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the callback associated to an event.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetHandle.htm">
            <b>IupSetHandle</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>(deprecated) Associates a name with an interface element.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetClassName.htm">
            <b>IupGetClassName</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the name of the class of an interface element.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetAllClasses.htm">
            <b>IupGetAllClasses</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the names of all registered classes.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetClassType.htm">
            <b>IupGetClassType</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the name of the native type of an interface element.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetClassAttributes.htm">
            <b>IupGetClassAttributes</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the names of all registered attributes of a class.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupGetClassCallbacks.htm">
            <b>IupGetClassCallbacks</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Returns the names of all registered callbacks of a class.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSaveClassAttributes.htm">
            <b>IupSaveClassAttributes</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Saves all registered attributes on the internal hash table.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupCopyClassAttributes.htm">
            <b>IupCopyClassAttributes</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Copies all registered attributes from one element to another.
          </td>
         </tr>
         <tr>
          <td valign=top>
           <a href="IupSetClassDefaultAttribute.htm">
            <b>IupSetClassDefaultAttribute</b>
           </a>
          </td>
          <td width=10 align=center valign=top>-</td>
          <td>Changes the default value of an attribute for a class. 
          </td>
         </tr>
        </table>
       <br>
        &nbsp;
       <br>
        The following attributes are common to several controls/interface element types:
       <br>
       <br>
       <table>
        <col style="width: 5%"/>
        <tr>
         <td valign=top>
          <a name=ACTIVE></a>
          ACTIVE
         </td>
         <td>
            Activates or inhibits user interaction. Value "YES" (active), "NO" (inactive). Default: "YES".<br>
            An interface element is only active if its native parent is also active.<br>
            ACTIVE can also be set for controls that do not have user interaction because they may have a visual feedback to indicate the inactive state.<br>
            In GTK and Motif the inactive dialogs will still be able to move, resize and change their Z-order.<br>
            Affects: All controls that have visual representation.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=EXPAND></a>
          EXPAND
         </td>
         <td>
            Allows the element to expand, fulfilling empty spaces inside its container.
            <br>
            <br>
            It is a non inheritable attribute, but a container inherit its parents EXPAND attribute. <br>
            In other words, although EXPAND is non inheritable, it is inheritable for containers. <br>
            So if you set it at a container it will not affect its children, except for those who are containers.<br>
            The expansion is done equally for all expandable elements in the same container.<br>
            <br>
            For a container, the actual EXPAND value will be always a combination of its own value and the value of its children, <br>
            in the sense that a container can only expand if its children can expand too in the same direction.<br>
            <br>
            The HORIZONTALFREE and VERTICALFREE values will not behave as normal expansion. <br>
            These values will NOT affect the expansion of the container when set at its children, <br>
            the children will simply expand to the available free space at the container.<br>
            See the <a href="iuplayout.htm">Layout Guide</a> for more details on sizes.<br>
            Value: "YES" (both directions), <wbr>"HORIZONTAL", <wbr>"VERTICAL", <wbr>"HORIZONTALFREE", <wbr>"VERTICALFREE" or "NO".<br>
            Default: "NO". For containers the default is "YES".<br>
            Affects: All elements, except menus.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=FONT></a>
          FONT
         </td>
         <td>
            A string defining the font, in the format "&lt;face&gt;, &lt;styles&gt; &lt;size&gt;".
            <br>
            <br>
            Since font face names are not a standard between Windows, Motif and GTK, a few names are specially handled to improve application portability. 
            If you want to use names that work for all systems we recommend using: Courier, Times and Helvetica (same as Motif). Those names always have 
            a native system equivalent, see the table below:
            <br>
            <div id="images" class="images">
            <br>
            <table>
            <tr>
                <th>Recommended/Motif</th>
                <th><center>Windows</center></th>
                <th><center>GTK</center></th>
                <th>Description</th>
            </tr>
            <tr>
                <td><strong>Helvetica</strong></td>
                <td><center>Arial</center></td>
                <td><center>Sans</center></td>
                <td>without serif, variable spacing</td>
            </tr>
            <tr>
                <td><strong>Courier</strong></td>
                <td><center>Courier New</center></td>
                <td><center>Monospace</center></td>
                <td>with serif, fixed spacing</td>
            </tr>
            <tr>
                <td><strong>Times</strong></td>
                <td><center>Times New Roman</center></td>
                <td><center>Serif</center></td>
                <td>with serif, variable spacing</td>
            </tr>
            </table>
            </div>
            <div class="clear"></div>
            <br>
            The supported font style is a combination of: Bold, Italic, Underline and Strikeout. Unsupported values are simply ignored. 
            The names must be in the same case described here.
            <br>
            <br>
            Font size is in points (1/72 inch) or in pixels (using negative values).
            <br>
            <br>
            Examples:
<!--eucode>
    "Times, Bold 18"
    "Arial, 24" (no style)
    "Courier New, Italic Underline -30" (size in pixels)
</eucode-->
<pre>
<font color="#000000"></font><font color="#008000">    "Times, Bold 18"
    "Arial, 24"</font><font color="#0000FF"> (</font><font color="#000000">no style</font><font color="#0000FF">)
</font><font color="#008000">    "Courier New, Italic Underline -30"</font><font color="#0000FF"> (</font><font color="#000000">size in pixels</font><font color="#0000FF">)</font>
</pre>
            <br>
            On Windows the native handle can be obtained using the "HFONT" attribute.<br>
            On Motif the native handle can be obtained using the "XMFONTLIST" and "XFONTSTRUCT" attributes. The selected X Logical Font Description string can be obtained from the attribute "XLFD".<br>
            On GTK the native handle can be obtained using the "PANGOFONTDESC" attribute.
            <br>
            <br>
            <h3>Auxiliary Attributes</h3>
            These will change the FONT attribute, and depend on it. <br>
            They are used only to set partial FONT parameters of style and size. <br>
            To do that the FONT attribute is parsed, changed and updated to the new value in the common format definition. <br>
            This means that if the attribute was set in X-Windows format or in the old Windows and IUP formats, the previous value will be replaced by a new value in the common format definition. <br>
            Pango additional styles will also be removed.
            <br>
            <table>
             <tr><td>FONTSTYLE</td><td>(non inheritable) Replaces or returns the style of the current FONT attribute. Since font styles are case sensitive, this attribute is also case sensitive.</td></tr>
             <tr><td>FONTSIZE</td><td>(non inheritable) Replaces or returns the size of the current FONT attribute.</td></tr>
             <tr><td>FONTFACE</td><td>(non inheritable) Replaces or returns the face name of the current FONT attribute.</td></tr>
             <tr><td>CHARSIZE</td><td>(read-only, non inheritable) Returns the average character size of the current FONT attribute. 
                                        This is the factor used by the <a href="iupattr.htm#SIZE">SIZE</a> attribute to convert its units to pixels.</td></tr>
             <tr><td>FOUNDRY</td><td>[Motif Only] (non inheritable) Allows to select a foundry for the FONT being selected. Must be set before setting the FONT attribute.</td></tr>
            </table>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=SCREENPOSITION></a>
          SCREENPOSITION/X/Y
         </td>
         <td>
            (read-only) (non inheritable) Returns the absolute horizontal and/or vertical position of the top left corner of the client area relative to the origin of the main screen in pixels. <br>
            It is similar to <a href="iupattr.htm#POSITION">POSITION</a> but relative to the origin of the main screen, instead of the origin of the client area. <br>
            The origin of the main screen is at the upper left corner, in Windows it is affected by the position of the Start Menu when it is at the top or left side of the screen. 
            <br>
            <br>
            IMPORTANT: For the dialog, it is the position of the top left corner of the window, NOT the client area. <br>
            It is the same position used in IupShowXY and IupPopup. <br>
            In GTK, if the dialog is hidden the values can be outdated.
            <br>
            <br>
            Value: "x,y", where x and y are integer values corresponding to the horizontal and vertical position, respectively, in pixels. <br>
            When X or Y are used a single value is returned.
            <br>
            <br>
            Affects: All controls that have visual representation.
            <br>
            <br>
            See Also: <a href="iupattr.htm#POSITION">POSITION</a>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=SCROLLBAR></a>
          SCROLLBAR
         </td>
         <td>
            (creation only) Associates a horizontal and/or vertical scrollbar to the element.
            <br>
            <br>
            Value: "VERTICAL", "HORIZONTAL", "YES" (both) or "NO" (none). Default: "NO"
            <br>
            <br>
            <h3>Configuration Attributes</h3> (non inheritable)
            <table>
             <tr><td>DX</td><td>Size of the thumb in the horizontal scrollbar. Also the horizontal page size. Default: "0.1".</td></tr>
             <tr><td>DY</td><td>Size of the thumb in the vertical scrollbar. Also the vertical page size. Default: "0.1".</td></tr>
             <tr><td>POSX</td><td>Position of the thumb in the horizontal scrollbar. Default: "0.0".</td></tr>
             <tr><td>POSY</td><td>Position of the thumb in the vertical scrollbar. Default: "0.0".</td></tr>
             <tr><td>XMIN</td><td>Minimum value of the horizontal scrollbar. Default: "0.0".</td></tr>
             <tr><td>XMAX</td><td>Maximum value of the horizontal scrollbar. Default: "1.0".</td></tr>
             <tr><td>YMIN</td><td>Minimum value of the vertical scrollbar. Default: "0.0".</td></tr>
             <tr><td>YMAX</td><td>Maximum value of the vertical scrollbar. Default: "1.0".</td></tr>
             <tr><td>LINEX</td><td>The amount the thumb moves when an horizontal step is performed. Default: 1/10th of DX. (since 3.0)</td></tr>
             <tr><td>LINEY</td><td>The amount the thumb moves when a vertical step is performed. Default: 1/10th of DY. (since 3.0)</td></tr>
             <tr><td>XAUTOHIDE</td><td>When enabled, if DX >= XMAX-XMIN then the horizontal scrollbar is hidden. Default: "YES". (since 3.0)</td></tr>
             <tr><td>YAUTOHIDE</td><td>When enabled, if DY >= YMAX-YMIN then the vertical scrollbar is hidden. Default: "YES". (since 3.0)</td></tr>
             <tr><td>XHIDDEN</td><td>returns if the scrollbar is hidden or not when XAUTOHIDE=Yes. (since 3.13)</td></tr>
             <tr><td>YHIDDEN</td><td>returns if the scrollbar is hidden or not when YAUTOHIDE=Yes. (since 3.13)</td></tr>
            </table>
            <br>
            &nbsp;
            <br>
            The scrollbar allows you to create a virtual space associated to the element. <br>
            In the image below, such space is marked in red, as well as the attributes that affect the composition of this space. <br>
            In green you can see how these attributes are reflected on the scrollbar.
            <br>
            <br>
            <img src="Images/scrollbar.gif"/>
            <br>
            <br>
            Hence you can clearly deduce that POSX is limited to XMIN and XMAX-DX, or  XMIN&lt;=POSX&lt;=XMAX-DX. 
            <br>
            <br>
            Usually applications configure XMIN and XMAX to a region in World coordinates, and set DX to the canvas visible area in World coordinates. <br>
            Since the canvas can have scrollbars and borders, its visible area in pixel coordinates can be easily obtained using the DRAWSIZE attribute.
            <br>
            <br>
            IMPORTANT: the LINEX, XMAX and XMIN attributes are only updated in the scrollbar when the DX attribute is updated.
            <br>
            <br>
            IMPORTANT: when working with a virtual space with integer coordinates, set XMAX to the integer size of the virtual space, NOT to "width-1", <br>
            or the last pixel of the virtual space will never be visible. <br>
            If you decide to let XMAX with the default value of 1.0 and to control only DX, then use the formula DX=visible_width/width.
            <br>
            <br>
            IMPORTANT: When the virtual space has the same size as the canvas, i.e. when DX &gt;= XMAX-XMIN, the scrollbar is automatically hidden if XAUTOHIDE=Yes. <br>
            The width of the vertical scrollbar (the same as the height of the horizontal scrollbar) can be obtained using the SCROLLBARSIZE global attribute (since 3.9).
            <br>
            <br>
            The same is valid for YMIN, YMAX, DY and POSY. But remember that the Y axis is oriented from top to bottom in IUP. <br>
            So if you want to consider YMIN and YMAX as bottom-up oriented, then the actual YPOS must be obtained using YMAX-DY-POSY.
            <br>
            <br>
            IMPORTANT: Changes in the scrollbar parameters do NOT generate ACTION nor SCROLL_CB callback events. <br>
            If you need to update the canvas contents call your own action callback or call IupUpdate. <br>
            But a change in the DX attribute may generate a RESIZE_CB callback event if XAUTOHIDE=Yes.
            <br>
            <br>
            If you have to change the properties of the scrollbar (XMIN, XMAX and DX) but you want to keep the thumb still (if possible) in the same relative position, <br>
            then you have to also recalculate its position (POSX) using the old position as reference to the new one. <br>
            For example, you can convert it to a 0-1 interval and then scale to the new limits:
            <br>
            <br>
            old_posx_relative = (old_posx - old_xmin)/(old_xmax - old_xmin) <br>
            posx = (xmax - xmin)*old_posx_relative + xmin
            <br>
            <br>
            IupList, IupTree, and IupText/IupMultiline scrollbars are automatically managed and do NOT have the POS*, *MIN, *MAX and D* attributes.
            <br>
            <br>
            When updating the virtual space size, or when the canvas is resized, if XAUTOHIDE=Yes then calculating the actual DX size can be very tricky. <br>
            Here is a helpful algorithm:

<!--eucode>
procedure scrollbar_update(Ihandle ih, integer view_width, integer view_height)
-- view_width and view_height are the virtual space size
-- here we assume XMIN=0, XMAX=1, YMIN=0, YMAX=1
integer {elem_width, elem_height} = IupGetIntInt(ih, "RASTERSIZE")
integer canvas_width, canvas_height
integer scrollbar_size = IupGetInt(NULL, "SCROLLBARSIZE")
integer border = IupGetInt(ih, "BORDER")

    -- if view is greater than canvas in one direction,
    -- then it has scrollbars,
    -- but this affects the opposite direction
    elem_width -= 2 * border;  -- remove BORDER (always size=1)
    elem_height -= 2 * border;
    canvas_width = elem_width;
    canvas_height = elem_height;
    if view_width>elem_width then -- check for horizontal scrollbar
        canvas_height -= scrollbar_size  -- affect vertical size
    end if
    if view_height>elem_height then
        canvas_width -= scrollbar_size
    end if
    if view_width<=elem_width and view_width>canvas_width then  -- check if still has horizontal scrollbar
        canvas_height -= scrollbar_size
    end if
    if view_height<=elem_height and view_height>canvas_height then
        canvas_width -= scrollbar_size
    end if
    if canvas_width<0 then canvas_width = 0 end if
    if canvas_height<0 then canvas_height = 0 end if

    IupSetFloat(ih, "DX", canvas_width/view_width)
    IupSetFloat(ih, "DY", canvas_height/view_height)
end procedure
</eucode-->
<pre>
<font color="#000000"></font><font color="#008080">procedure</font><font color="#000000"> scrollbar_update</font><font color="#0000FF">(</font><font color="#5E005E">Ihandle</font><font color="#000000"> ih</font><font color="#0000FF">,</font><font color="#004080"> integer</font><font color="#000000"> view_width</font><font color="#0000FF">,</font><font color="#004080"> integer</font><font color="#000000"> view_height</font><font color="#0000FF">)
</font><font color="#000080"><i>-- view_width and view_height are the virtual space size
-- here we assume XMIN=0, XMAX=1, YMIN=0, YMAX=1
</i></font><font color="#004080">integer</font><font color="#0000FF"> {</font><font color="#000000">elem_width</font><font color="#0000FF">,</font><font color="#000000"> elem_height</font><font color="#0000FF">} =</font><font color="#5E005E"> IupGetIntInt</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "RASTERSIZE"</font><font color="#0000FF">)
</font><font color="#004080">integer</font><font color="#000000"> canvas_width</font><font color="#0000FF">,</font><font color="#000000"> canvas_height
</font><font color="#004080">integer</font><font color="#000000"> scrollbar_size</font><font color="#0000FF"> =</font><font color="#5E005E"> IupGetInt</font><font color="#0000FF">(</font><font color="#004600">NULL</font><font color="#0000FF">,</font><font color="#008000"> "SCROLLBARSIZE"</font><font color="#0000FF">)
</font><font color="#004080">integer</font><font color="#000000"> border</font><font color="#0000FF"> =</font><font color="#5E005E"> IupGetInt</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "BORDER"</font><font color="#0000FF">)

</font><font color="#000080"><i>    -- if view is greater than canvas in one direction,
    -- then it has scrollbars,
    -- but this affects the opposite direction
</i></font><font color="#000000">    elem_width</font><font color="#0000FF"> -=</font><font color="#000000"> 2</font><font color="#0000FF"> *</font><font color="#000000"> border</font><font color="#0000FF">; </font><font color="#000080"><i> -- remove BORDER (always size=1)
</i></font><font color="#000000">    elem_height</font><font color="#0000FF"> -=</font><font color="#000000"> 2</font><font color="#0000FF"> *</font><font color="#000000"> border</font><font color="#0000FF">;
</font><font color="#000000">    canvas_width</font><font color="#0000FF"> =</font><font color="#000000"> elem_width</font><font color="#0000FF">;
</font><font color="#000000">    canvas_height</font><font color="#0000FF"> =</font><font color="#000000"> elem_height</font><font color="#0000FF">;
</font><font color="#008080">    if</font><font color="#000000"> view_width</font><font color="#0000FF">&gt;</font><font color="#000000">elem_width</font><font color="#008080"> then</font><font color="#000080"><i> -- check for horizontal scrollbar
</i></font><font color="#000000">        canvas_height</font><font color="#0000FF"> -=</font><font color="#000000"> scrollbar_size </font><font color="#000080"><i> -- affect vertical size
</i></font><font color="#008080">    end if
    if</font><font color="#000000"> view_height</font><font color="#0000FF">&gt;</font><font color="#000000">elem_height</font><font color="#008080"> then
</font><font color="#000000">        canvas_width</font><font color="#0000FF"> -=</font><font color="#000000"> scrollbar_size
</font><font color="#008080">    end if
    if</font><font color="#000000"> view_width</font><font color="#0000FF">&lt;=</font><font color="#000000">elem_width</font><font color="#008080"> and</font><font color="#000000"> view_width</font><font color="#0000FF">&gt;</font><font color="#000000">canvas_width</font><font color="#008080"> then </font><font color="#000080"><i> -- check if still has horizontal scrollbar
</i></font><font color="#000000">        canvas_height</font><font color="#0000FF"> -=</font><font color="#000000"> scrollbar_size
</font><font color="#008080">    end if
    if</font><font color="#000000"> view_height</font><font color="#0000FF">&lt;=</font><font color="#000000">elem_height</font><font color="#008080"> and</font><font color="#000000"> view_height</font><font color="#0000FF">&gt;</font><font color="#000000">canvas_height</font><font color="#008080"> then
</font><font color="#000000">        canvas_width</font><font color="#0000FF"> -=</font><font color="#000000"> scrollbar_size
</font><font color="#008080">    end if
    if</font><font color="#000000"> canvas_width</font><font color="#0000FF">&lt;</font><font color="#000000">0</font><font color="#008080"> then</font><font color="#000000"> canvas_width</font><font color="#0000FF"> =</font><font color="#000000"> 0</font><font color="#008080"> end if
    if</font><font color="#000000"> canvas_height</font><font color="#0000FF">&lt;</font><font color="#000000">0</font><font color="#008080"> then</font><font color="#000000"> canvas_height</font><font color="#0000FF"> =</font><font color="#000000"> 0</font><font color="#008080"> end if

</font><font color="#5E005E">    IupSetFloat</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "DX"</font><font color="#0000FF">,</font><font color="#000000"> canvas_width</font><font color="#0000FF">/</font><font color="#000000">view_width</font><font color="#0000FF">)
</font><font color="#5E005E">    IupSetFloat</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "DY"</font><font color="#0000FF">,</font><font color="#000000"> canvas_height</font><font color="#0000FF">/</font><font color="#000000">view_height</font><font color="#0000FF">)
</font><font color="#008080">end procedure</font>
</pre>
            <br>
            Inside the canvas ACTION callback, the (x,y) offset for drawing is calculated as:
<!--eucode>
integer x, y, canvas_width, canvas_height
atom posy = IupGetFloat(ih, "POSY")
atom posx = IupGetFloat(ih, "POSX")

{canvas_width, canvas_height} = IupGetIntInt(ih, "DRAWSIZE")

if canvas_width<view_width then
    x = floor(-posx*view_width)
else
    x = floor((canvas_width-view_width)/2)  -- for example, center the view
end if
if canvas_height<view_height then
    -- posy is top-bottom, CD and OpenGL are bottom-top.
    -- invert posy reference (YMAX-DY - POSY)
    atom dy = IupGetFloat(ih, "DY")
    posy = 1 - dy - posy
    y = floor(-posy*view_height)
else
    y = floor((canvas_height-view_height)/2)  -- for example, center the view
end if
</eucode-->
<pre>
<font color="#000000"></font><font color="#004080">integer</font><font color="#000000"> x</font><font color="#0000FF">,</font><font color="#000000"> y</font><font color="#0000FF">,</font><font color="#000000"> canvas_width</font><font color="#0000FF">,</font><font color="#000000"> canvas_height
</font><font color="#004080">atom</font><font color="#000000"> posy</font><font color="#0000FF"> =</font><font color="#5E005E"> IupGetFloat</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "POSY"</font><font color="#0000FF">)
</font><font color="#004080">atom</font><font color="#000000"> posx</font><font color="#0000FF"> =</font><font color="#5E005E"> IupGetFloat</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "POSX"</font><font color="#0000FF">)

{</font><font color="#000000">canvas_width</font><font color="#0000FF">,</font><font color="#000000"> canvas_height</font><font color="#0000FF">} =</font><font color="#5E005E"> IupGetIntInt</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "DRAWSIZE"</font><font color="#0000FF">)

</font><font color="#008080">if</font><font color="#000000"> canvas_width</font><font color="#0000FF">&lt;</font><font color="#000000">view_width</font><font color="#008080"> then
</font><font color="#000000">    x</font><font color="#0000FF"> =</font><font color="#7060A8"> floor</font><font color="#0000FF">(-</font><font color="#000000">posx</font><font color="#0000FF">*</font><font color="#000000">view_width</font><font color="#0000FF">)
</font><font color="#008080">else
</font><font color="#000000">    x</font><font color="#0000FF"> =</font><font color="#7060A8"> floor</font><font color="#0000FF">(</font><font color="#800000">(</font><font color="#000000">canvas_width</font><font color="#0000FF">-</font><font color="#000000">view_width</font><font color="#800000">)</font><font color="#0000FF">/</font><font color="#000000">2</font><font color="#0000FF">) </font><font color="#000080"><i> -- for example, center the view
</i></font><font color="#008080">end if
if</font><font color="#000000"> canvas_height</font><font color="#0000FF">&lt;</font><font color="#000000">view_height</font><font color="#008080"> then
</font><font color="#000080"><i>    -- posy is top-bottom, CD and OpenGL are bottom-top.
    -- invert posy reference (YMAX-DY - POSY)
</i></font><font color="#004080">    atom</font><font color="#000000"> dy</font><font color="#0000FF"> =</font><font color="#5E005E"> IupGetFloat</font><font color="#0000FF">(</font><font color="#000000">ih</font><font color="#0000FF">,</font><font color="#008000"> "DY"</font><font color="#0000FF">)
</font><font color="#000000">    posy</font><font color="#0000FF"> =</font><font color="#000000"> 1</font><font color="#0000FF"> -</font><font color="#000000"> dy</font><font color="#0000FF"> -</font><font color="#000000"> posy
    y</font><font color="#0000FF"> =</font><font color="#7060A8"> floor</font><font color="#0000FF">(-</font><font color="#000000">posy</font><font color="#0000FF">*</font><font color="#000000">view_height</font><font color="#0000FF">)
</font><font color="#008080">else
</font><font color="#000000">    y</font><font color="#0000FF"> =</font><font color="#7060A8"> floor</font><font color="#0000FF">(</font><font color="#800000">(</font><font color="#000000">canvas_height</font><font color="#0000FF">-</font><font color="#000000">view_height</font><font color="#800000">)</font><font color="#0000FF">/</font><font color="#000000">2</font><font color="#0000FF">) </font><font color="#000080"><i> -- for example, center the view
</i></font><font color="#008080">end if</font>
</pre>
            <br>
            Call scrollbar_update from the RESIZE_CB callback and when you change the zoom factor that affects view_width or view_height.
            <br>
            <br>
            Affects: IupList, IupMultiline, IupCanvas
            <br>
            <br>
            See Also: POSX, XMIN, XMAX, DX, POSY, YMIN, YMAX, DY
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=POSITION></a>
          POSITION
         </td>
         <td>
            (non inheritable) The position of the element relative to the origin of the Client area of the native parent. <br>
            If you add the CLIENTOFFSET attribute of the native parent, you can obtain the coordinates relative to the Window area of the native parent. 
            See the <a href="iuplayout.htm">Layout Guide</a>.
            <br>
            <br>
            It will be changed during the layout computation, except when FLOATING=YES or when used inside a concrete layout container.
            <br>
            <br>
            Value: "x,y", where x and y are integer values corresponding to the horizontal and vertical position, respectively, in pixels.
            <br>
            <br>
            Affects: All, except menus.
            <br>
            <br>
            See Also: <a href="iupattr.htm#SIZE">SIZE</a>, RASTERSIZE, FLOATING, CLIENTOFFSET
         </td>
        </tr>
        <tr>
         <td valign=top>
          <a name=SIZE></a>
          SIZE
         </td>
         <td>
            (non inheritable) Specifies the element User size, and returns the Current size, in units proportional to the size of a character.
            <br>
            <br>
            See the <a href="iuplayout.htm">Layout Guide</a> for more details on sizes.
            <br>
            <br>
            Value: "widthxheight", where width and height are integer values corresponding to the horizontal and vertical size, respectively, in characters fraction unit (see Notes below). 
            <br>
            <br>
            You can also set only one of the parameters by removing the other one and maintaining the separator "x", but this is equivalent of setting the other value to 0. <br>
            For example: "x40" (height only = "0x40") or "40x" (width only = "40x0").
            <br>
            <br>
            When this attribute is consulted the Current size of the control is returned.
            <br>
            <br>
            Notes<br>
            The size units observes the following heuristics:
            <br>
            <br>
            Width in 1/4's of the average width of a character for the current FONT of each control. <br>
            Height in 1/8's of the average height of a character for the current FONT of each control. <br>
            So, a SIZE="4x8" means 1 character width and 1 character height.
            <br>
            <br>
            Notice that this is the average character size, the space occupied by a specific string is always different to
            the number of characters times the average character size, except when using a monospaced font like Courier. <br>
            Usually for common strings this size is smaller than the actual size, so it is a good practice to leave more room than expected if you use the SIZE attribute. <br>
            For smaller font sizes this difference is more noticeable than for larger font sizes.
            <br>
            <br>
            When this attribute is changed, the RASTERSIZE attribute is automatically updated.
            <br>
            <br>
            SIZE depends on FONT, so when FONT is changed and SIZE is set, then RASTERSIZE is also updated.
            <br>
            <br>
            The average character size of the current FONT can be obtained from the CHARSIZE attribute.
            <br>
            <br>To obtain the last computed Natural size of the element in pixels, use the read-only attribute NATURALSIZE. (Since 3.6)
            <br>
            <br>
            To obtain the User size of the element in pixels after it is mapped, use the attribute USERSIZE. (Since 3.12)
            <br>
            <br>
            A User size of "0x0" can be set, it can also be set using NULL. If both values are 0 then NULL is returned.
            <br>
            <br>
            If you wish to use the User size only as an initial size, change this attribute to NULL after the control is mapped, the returned size in IupGetAttribute will still be the Current size.
            <br>
            <br>
            The element is NOT immediately repositioned. Call IupRefresh to update the dialog layout.
            <br>
            <br>
            IupMap also updates the dialog layout even if it is already mapped, so calling it or calling IupShow, IupShowXY or IupPopup (they all call IupMap) will also update the dialog layout.
            <br>
            <br>
            See the <a href="iuplayout.htm">Layout Guide</a> for mode details on sizes.
            <br>
            <br>
            Affects: All, except menus.
            <br>
            <br>
            See Also: <a href="iupattr.htm#FONT">FONT</a>, RASTERSIZE, <a href="IupRefresh.htm">IupRefresh</a>
         </td>
        </tr>

<!--DEV-->
<!--
        <tr>
         <td valign=top>
          <a name=BGCOLOR></a>
          BGCOLOR
         </td>
         <td>
            Background color. If ...
         </td>
        </tr>
-->
        <tr>
         <td valign=top>
          also [DEV]
         </td>
         <td>
            <a href="iupattr.htm#ACTIVE">ACTIVE</a>, 
            <a href="iupattr.htm#EXPAND">EXPAND</a>, 
            <a href="iupattr.htm#FONT">FONT</a>, 
            <a href="iupattr.htm#SCREENPOSITION">SCREENPOSITION</a>, 
            <a href="iupattr.htm#POSITION">POSITION</a>, 
            MINSIZE, MAXSIZE, WID, TIP, 
            <a href="iupattr.htm#SIZE">SIZE</a>,
            RASTERSIZE, ZORDER, VISIBLE,
            FLOATING, CLIENTOFFSET
         </td>
        </tr>
       </table>
       <br>
        &nbsp;
       <br>
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
