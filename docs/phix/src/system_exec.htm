<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">system_exec</h1>
      <div id="mainSection">
       <table>
        <col style="width: 5%"/>
        <tr>
         <td valign=top>
          <b>Syntax:</b>
         </td>
         <td>
          <font face = "Arial, Helvetica"> integer i1 = system_exec(string st, integer mode=2)
          </font>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Description:</b>
         </td>
         <td>
          Try to run the command given by st. st must be a command to run an
          executable program, possibly with some command-line arguments.
          If the program can be run, i1 will be the exit code from the
          program. If it is not possible to run the program, system_exec()
          returns -1. See <a href="system.htm">system</a> for an explanation
          of the mode parameter.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Comments:</b>
         </td>
         <td>On DOS32 or WIN32, system_exec() will only run
          <b>.exe</b> and
          <b>.com</b> 
             programs. To run
          <b>.bat</b> files, or built-in DOS commands, you need 
            <a href="system.htm">system</a> or <a href="sysexec.htm">sysexec</a>.
             Some commands, such as DEL, are not programs, they are
             actually built-in to the command interpreter.
          <br>
          <br>
            system_exec() does <b><i>not</i></b> allow the use of command-line 
            redirection in the command string st (whereas <a href="sysexec.htm">sysexec</a>
            does).
          <br>
          <br>
            exit codes from DOS or Windows programs are normally in the
            range 0 to 255, with 0 indicating "success".
          <br>
          <br>
            You can run a Phix program using system_exec(), and it can
            return an exit code using abort().
          <br>
          <br>
            system_exec() does not start a new DOS shell.
          <br>
          <br>
          If you cannot decide between system, sysproc, system_exec, and sysexec, this <a href="opsystem.htm#sys">table</a> may help.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Example 1:</b>
         </td>
         <td>
<!--eucode>
integer exit_code
exit_code = system_exec("xcopy temp1.dat temp2.dat", 2)
if exit_code = -1 then
    puts(2, "\n couldn't run xcopy.exe\n")
elsif exit_code = 0 then
    puts(2, "\n xcopy succeeded\n")
else
    printf(2, "\n xcopy failed with code %d\n", exit_code)
end if
</eucode-->
<pre>
<font color="#000000"></font><font color="#004080">integer</font><font color="#000000"> exit_code
exit_code</font><font color="#0000FF"> =</font><font color="#800080"> system_exec</font><font color="#0000FF">(</font><font color="#008000">"xcopy temp1.dat temp2.dat"</font><font color="#0000FF">,</font><font color="#000000"> 2</font><font color="#0000FF">)
</font><font color="#008080">if</font><font color="#000000"> exit_code</font><font color="#0000FF"> = -</font><font color="#000000">1</font><font color="#008080"> then
</font><font color="#7060A8">    puts</font><font color="#0000FF">(</font><font color="#000000">2</font><font color="#0000FF">,</font><font color="#008000"> "\n couldn't run xcopy.exe\n"</font><font color="#0000FF">)
</font><font color="#008080">elsif</font><font color="#000000"> exit_code</font><font color="#0000FF"> =</font><font color="#000000"> 0</font><font color="#008080"> then
</font><font color="#7060A8">    puts</font><font color="#0000FF">(</font><font color="#000000">2</font><font color="#0000FF">,</font><font color="#008000"> "\n xcopy succeeded\n"</font><font color="#0000FF">)
</font><font color="#008080">else
</font><font color="#800080">    printf</font><font color="#0000FF">(</font><font color="#000000">2</font><font color="#0000FF">,</font><font color="#008000"> "\n xcopy failed with code %d\n"</font><font color="#0000FF">,</font><font color="#000000"> exit_code</font><font color="#0000FF">)
</font><font color="#008080">end if</font>
</pre>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Example 2:</b>
         </td>
         <td>
<!--eucode>
-- executes myprog with two file names as arguments
if system_exec("p.exe \\test\\myprog.ex indata.csv outdata.csv", 2) then
    puts(2, "failure!\n")
end if
</eucode-->
<pre>
<font color="#000000"></font><font color="#000080">-- executes myprog with two file names as arguments
</font><font color="#008080">if</font><font color="#800080"> system_exec</font><font color="#0000FF">(</font><font color="#008000">"p.exe \\test\\myprog.ex indata.csv outdata.csv"</font><font color="#0000FF">,</font><font color="#000000"> 2</font><font color="#0000FF">)</font><font color="#008080"> then
</font><font color="#7060A8">    puts</font><font color="#0000FF">(</font><font color="#000000">2</font><font color="#0000FF">,</font><font color="#008000"> "failure!\n"</font><font color="#0000FF">)
</font><font color="#008080">end if</font>
</pre>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>See Also:</b>
         </td>
         <td>
          <a href="system.htm">system</a>,
          <a href="sysexec.htm">sysexec</a>,
          <a href="abort.htm">abort</a>
         </td>
        </tr>
       </table>
       <p></p>
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
