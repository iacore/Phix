<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">temp_file</h1>
      <div id="mainSection">
       <table>
        <col style="width: 5%"/>
        <tr>
         <td>
          <b>Definition:</b>
         </td>
         <td>
          string filename = temp_file(<a href="string.htm">string</a> location="", prefix="", extn="tmp", open_mode="")
          <br>
          <i>--or--</i>
          <br>
          {<a href="integer.htm">integer</a> fn, <a href="string.htm">string</a> filename} = temp_file( <i>ditto</i> ) -- (if open_mode!="")
         </td>
        </tr>
        <tr>
         <td>
          <b>Description:</b>
         </td>
         <td>
            Create a temporary filename, which does not already exist, and optionally open it.
            <br>
            <br>
            location: The directory where the file should be created. If omitted it uses %TEMP% or %TMP%, or C:\temp\ or /tmp/.<br>
            prefix: the (optional) first part of the filename.<br>
            extn: the file extension to use, default is "tmp".<br>
            open_mode: if not "", must be one of "w", "wb", "a", or "ab", in which case it returns an open file handle and string.
            <br>
            <br>
            If open_mode is not provided, there is a 1-in-a-million chance someone else will beat you to the punch; if you do provide 
            one, it will open/loop for you, and return {fn,filename}. In the latter case you are expected to close and delete the file.
         </td>
        </tr>
        <tr>
         <td>
          <b>Example:</b>
         </td>
         <td>
<!--eucode>
pp(temp_file())
{integer fn, string name} = temp_file("myapp/tmp","data","log","wb")
pp({fn,name})
close(fn)
{} = delete_file(name)
-- output:
-- `C:\Users\Pete\AppData\Local\Temp\419750.tmp`
-- {3, `C:\Program Files (x86)\Phix\myapp\tmp\data408865.log`}
</eucode-->
<pre>
<font color="#000000"></font><font color="#5E005E">pp</font><font color="#0000FF">(</font><font color="#5E005E">temp_file</font><font color="#800000">()</font><font color="#0000FF">)
{</font><font color="#004080">integer</font><font color="#000000"> fn</font><font color="#0000FF">,</font><font color="#004080"> string</font><font color="#000000"> name</font><font color="#0000FF">} =</font><font color="#5E005E"> temp_file</font><font color="#0000FF">(</font><font color="#008000">"myapp/tmp"</font><font color="#0000FF">,</font><font color="#008000">"data"</font><font color="#0000FF">,</font><font color="#008000">"log"</font><font color="#0000FF">,</font><font color="#008000">"wb"</font><font color="#0000FF">)
</font><font color="#5E005E">pp</font><font color="#0000FF">(</font><font color="#800000">{</font><font color="#000000">fn</font><font color="#0000FF">,</font><font color="#000000">name</font><font color="#800000">}</font><font color="#0000FF">)
</font><font color="#7060A8">close</font><font color="#0000FF">(</font><font color="#000000">fn</font><font color="#0000FF">)
{} =</font><font color="#5E005E"> delete_file</font><font color="#0000FF">(</font><font color="#000000">name</font><font color="#0000FF">)
</font><font color="#000080"><i>-- output:
-- `C:\Users\Pete\AppData\Local\Temp\419750.tmp`
-- {3, `C:\Program Files (x86)\Phix\myapp\tmp\data408865.log`}</i></font>
</pre>
         </td>
        </tr>
        <tr>
         <td>
          <b>See Also:</b>
         </td>
         <td>
          <a href="open.htm">open</a>,
          <a href="close.htm">close</a>,
          <a href="delete_file.htm">delete_file</a>
         </td>
        </tr>
        <tr>
         <td>
          <b>Implementation:</b>
         </td>
         <td>
            See builtins\pfile.e (an autoinclude) for details of the actual implementation.
         </td>
        </tr>
        <tr id="Technicalia" style="display:none;">
         <td>
          <a href="glossary.htm#technicalia">
           <b>Technicalia</b>
          </a>
         </td>
         <td>
            The location can actually be a file rather than a directory (compatible with Euphoria), not that I can think of any good reason why.
            <br>
            <br>
            The Euphoria version of this routine has an (also optional) integer fourth parameter, reserve_temp, which creates a (closed) empty
            file, instead of the string open_mode of the Phix version, and the default extension is "_T_"rather than "tmp". 
            Otherwise the routines are (reasonably) compatible.
         </td>
        </tr>
       </table>
       <img src="images/sprites/tech.open.png" title="Expand/Shrink" alt="Expand/Shrink" style="display:block;clear:both;" onload="setStartT(this);" onclick="changeImageT(this);" />
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
