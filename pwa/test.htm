<!DOCTYPE html>
<html lang="en" >
 <head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>gTreeView.exw</title>
  <link type="text/css" rel="stylesheet" media="screen" href="xpGUI.css" />
 </head>
 <body style="font-family: monospace;">
  <script src="p2js.js"></script>
  <script src="builtins/find.js"></script>
  <script src="builtins/pmaths.js"></script>
  <script src="builtins/ptagset.js"></script>
  <script src="xpGUI.js"></script>
  <script>
// auto-generated by pwa/p2js, see http://phix.x10.mx
"use strict";
//
// demo\xpGUI\gTreeView.exw
// ========================
// 
//  See also gTreeView2.exw for an example of deferred loading.
//
/*with javascript_semantics*/ //requires(64)

//gUseGTK()

//
// While a literal constant such as this is a bit eye-wateringly ugly, and
// needs fastidious attention to detail with all the nesting levels, it is
// intended to be relatively straightforward to construct, from almost any
// any suitable data source, using a simple recursive function.
// [I am open to suggestions for other ways to construct this.]
//
const tree_nodes = ["sequence","Figures",
                               ["sequence","Other",
                                           ["sequence","triangle",
                                                       ["sequence","STATE", "COLLAPSED"],
                                                       ["sequence","equilateral",
                                                                   ["sequence","isoceles",
                                                                               ["sequence","STATE", "COLLAPSED"],
                                                                               ["sequence","acute",
                                                                                           "obtuse"]],
                                                                   "scalenus"]],
                                           ["sequence","parallelogram",
                                                       ["sequence","square",
                                                                   "diamond"]],
                                           "2D",
                                           ["sequence","3D",
                                                       ["sequence","STATE", "COLLAPSED"],["sequence"]],
                                           ["sequence","4D",
                                                       ["sequence","STATE", "COLLAPSED"],
                                                       ["sequence","some",
                                                                   "other",
                                                                   "branch"],
                                                       ["sequence","random data"]]]];
let /*gdx*/ tree_view = gTreeView(tree_nodes), 
//gdx tree_view = gTreeView(tree_nodes,"SIZE=250x220"),
//gdx tree_view = gTreeView(tree_nodes),
//gdx tree_view = gTreeView({}),
//        dlg = gDialog(tree_view,`TITLE="gTreeView",SIZE=250x220`)
//        dlg = gDialog(tree_view,`gTreeView`)
            dlg = gDialog(tree_view,`gTreeView`,"SIZE=240x160");
//gShow(dlg)
//gTreeAddNodes(tree_view,{})
//gTreeAddNodes(tree_view,tree_nodes)
//?upper(deep_copy(tree_nodes))
//gTreeAddNodes(tree_view,upper(deep_copy(tree_nodes)))
gShow(dlg);
print(1, gGetAttribute(dlg,"SIZE"));
print(1, gGetAttribute(tree_view,"SIZE"));
gMainLoop();
  </script>
 </body>
</html>
